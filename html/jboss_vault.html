<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>JBoss - Use vault to encrypt password</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link rel="stylesheet" href="css/pygments.css" type="text/css">
<style type="text/css">
a:link {
        text-decoration:none !important;
            color:#1C1C1C !important;
}
a:link:hover {
        text-decoration:underline !important;
}
.sort {
        margin:0 0 10px 15px;
}
</style>
<script type="text/javascript">
</script>
</head>
<body >
<div class="container">
<h1>
JBoss - Use vault to encrypt password
</h1>
<div class="sect1">
<h2 id="_create_the_vault_and_store_password">Create the vault and store password</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># Create the keystore</span>
keytool -genkey -keyalg RSA -keysize 1024 -alias vault -keystore vault.keystore

<span class="c"># Store password into the keystore with the vault</span>
./vault.sh

<span class="c">#  Enter directory to store encrypted files (... \ based on Unix or Windows:/home/student/</span>
<span class="c">#  Enter Keystore URL:/home/student/vault.keystore</span>
<span class="c">#  Enter Keystore password:</span>
<span class="c">#  Enter Keystore password again:</span>
<span class="c">#  Values match</span>
<span class="c">#  Enter 8 character salt:12345678</span>
<span class="c">#  Enter iteration count as a number (Eg: 44):50</span>
<span class="c">#  (...)</span>
<span class="c">#  ********************************************</span>
<span class="c">#  Masked Password:MASK-20Mquir8d.W/ashplp.8ZZ</span>
<span class="c">#  salt:12345678</span>
<span class="c">#  Iteration Count:50</span>
<span class="c">#  ********************************************</span>
<span class="c">#  Enter Keystore Alias:vault</span>
<span class="c">#  (...)</span>
<span class="c">#  Please enter a Digit::   0: Store a password  1: Check whether password exists  2: Exit</span>
<span class="c">#  0</span>
<span class="c">#  (...)</span>
<span class="c">#  Please make note of the following:</span>
<span class="c">#  ********************************************</span>
<span class="c">#  Vault Block:postgres</span>
<span class="c">#  Attribute Name:postgres</span>
<span class="c">#  Shared Key:MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0</span>
<span class="c">#  Configuration should be done as follows:</span>
<span class="c">#  VAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0</span>
<span class="c">#  ********************************************</span>
</pre></div></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_use_the_encrypted_password_in_datasource">Use the encrypted password in Datasource</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Edit domain.xml
</p>
</li>
<li>
<p>
Find the Datasource and replace the password by :
</p>
<div class="ulist"><ul>
<li>
<p>
VAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0
</p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
