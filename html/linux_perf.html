<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />
<title>Linux perf &amp; troubleshooting</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link rel="stylesheet" href="css/pygments.css" type="text/css">
<style type="text/css">
a:link {
        text-decoration:none !important;
            color:#1C1C1C !important;
}
a:link:hover {
        text-decoration:underline !important;
}
.sort {
        margin:0 0 10px 15px;
}
</style>
<script type="text/javascript">
</script>
</head>
<body >
<div class="container">
<h1>
Linux perf &amp; troubleshooting
</h1>
<div class="sect1">
<h2 id="_ram">RAM</h2>
<div class="sectionbody">
</div>
</div>
<div class="sect1">
<h2 id="_cpu">CPU</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
runq = number of process waiting CPU time
</p>
</li>
<li>
<p>
cswitch (context switch) = change of process = parallel calculations
</p>
</li>
<li>
<p>
system load
</p>
<div class="ulist"><ul>
<li>
<p>
load average : 1min 5min 15min (over the last Xmin)
</p>
</li>
<li>
<p>
traffic analogy : X single processor(s) = X bridge(s) of traffic
</p>
<div class="ulist"><ul>
<li>
<p>
load (i.e a single processor)
</p>
<div class="ulist"><ul>
<li>
<p>
0 = no traffic
</p>
</li>
<li>
<p>
0,70 = begin to check if there is something wrong
</p>
</li>
<li>
<p>
1 = full traffic without "contention"
</p>
</li>
<li>
<p>
&gt; 1 = full traffic + waiting processes
</p>
</li>
<li>
<p>
3 = 3x the full traffic capacity
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_commands_amp_tools">Commands &amp; tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ganglia">GANGLIA</h3>
<div class="ulist"><ul>
<li>
<p>
CPU graph
</p>
<div class="ulist"><ul>
<li>
<p>
User / System CPU : utilisation du CPU user/applicatif et system
</p>
<div class="ulist"><ul>
<li>
<p>
Nice CPU : %CPU time occupé par des process à faible prio
</p>
</li>
<li>
<p>
WAIT CPU : %tps passé par le CPU à attendre des remontées d&#8217;IO disques (= CPU wio)
</p>
<div class="ulist"><ul>
<li>
<p>
Idle CPU : %tps CPU à glander
</p>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_vmstat">VMSTAT</h3>
<div class="ulist"><ul>
<li>
<p>
R : running queue
</p>
</li>
<li>
<p>
B : blocked (wait io - wio | blocked)
</p>
</li>
<li>
<p>
IN : Number of interrupts
</p>
</li>
<li>
<p>
CS : Number of context switchs
</p>
</li>
<li>
<p>
US : %CPU time sur User Thread
</p>
</li>
<li>
<p>
SYS : %CPU time sur Kernel + Interrupts
</p>
</li>
<li>
<p>
WA : %CPU idle à case d&#8217;un wait IO
</p>
</li>
<li>
<p>
ID : %CPU time complétement idle
</p>
</li>
<li>
<p>
BI : IO Write
</p>
</li>
<li>
<p>
BO : IO Read
</p>
</li>
<li>
<p>
SI : swap in = vers la RAM
</p>
</li>
<li>
<p>
SO : swap out = vers le disque
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_sar">SAR</h3>
<div class="listingblock">
<div class="content"><div class="highlight"><pre>sar -q <span class="o">(</span>queue length, task list length + load avg<span class="o">)</span>
</pre></div></div></div>
<div class="paragraph"><p>tag : perf, audit, troubleshooting</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
