{
    "docs": [
        {
            "location": "/", 
            "text": "Technical notes\n\n\nBlob of technical notes. I use these pages as a personal wiki.\n\n\nhttps://github.com/Pryz", 
            "title": "Home"
        }, 
        {
            "location": "/#technical-notes", 
            "text": "Blob of technical notes. I use these pages as a personal wiki.  https://github.com/Pryz", 
            "title": "Technical notes"
        }, 
        {
            "location": "/acl/", 
            "text": "Manage ACL\n\n\n# Set ACL for an user\nsetfacl -m u:username:rwx file\n# Remove ACL for an user\nsetfacl -x u:username file\n# See the changes\ngetfacl file\n\n\n\n\nTune filesystem\n\n\n# List filesystem informations\ntune2fs -l /dev/mapper/vgdata-lvdata\n# To active ACL\ntune2fs -o user_xattr,acl /dev/mapper/vgdata-lvdata\nmount -o remount,acl /mount_point", 
            "title": "Acl"
        }, 
        {
            "location": "/acl/#manage-acl", 
            "text": "# Set ACL for an user\nsetfacl -m u:username:rwx file\n# Remove ACL for an user\nsetfacl -x u:username file\n# See the changes\ngetfacl file", 
            "title": "Manage ACL"
        }, 
        {
            "location": "/acl/#tune-filesystem", 
            "text": "# List filesystem informations\ntune2fs -l /dev/mapper/vgdata-lvdata\n# To active ACL\ntune2fs -o user_xattr,acl /dev/mapper/vgdata-lvdata\nmount -o remount,acl /mount_point", 
            "title": "Tune filesystem"
        }, 
        {
            "location": "/ad_get_infos_ps/", 
            "text": "import-module activedirectory\nGet-ADUser -identity username\nGet-ADDomainController", 
            "title": "Ad get infos ps"
        }, 
        {
            "location": "/add_lun_mpath/", 
            "text": "# refresh new devices\nls /sys/class/scsi_host\n#host0 host1 host2 host3 host4\nfor i in 0 1 2 3 4; do echo \n- - -\n \n /sys/class/scsi_host/host$i/scan; done\n\n# get one of the new sdX devices (paths) with fdisk\n# get the SCSI id of the new LUN\nscsi_id -gus /block/sdX\n\n# vi /etc/multipath.conf\n# blacklist_exceptions {\n#    ...\n#    wwid \nTHE_SCSI_ID_OF_THE_NEW_LUN\n\n# }\n\n# use multipathd to create the mpathX device\nmultipathd -k\n# multipathd\n reconfigure\n# multipathd\n CTRL+D\n\n# check if the new device is configure\nmultipath -ll", 
            "title": "Add lun mpath"
        }, 
        {
            "location": "/android_hacks/", 
            "text": "cd android-sdk-linux/platform-tools\n# List all devices\n./adb devices -l\n# Flash the fastboot\n./fastboot flash recovery-clockwork-touch-6.0.2.3-magu\n\n\n\n\n\nClick 7 times on \"Build Number\" to active dev mode", 
            "title": "Android hacks"
        }, 
        {
            "location": "/android_sdk/", 
            "text": "# In order to use adb\napt-get install ia32-libs\n\n\n\nDowload the SDK.\n\n\nhttp://developer.android.com/sdk/index.html\n\n\n\nAdd sources sites to Aptana Studio.\n\n\nhttp://download.eclipse.org/releases/helios\nhttps://dl-ssl.google.com/android/eclipse/", 
            "title": "Android sdk"
        }, 
        {
            "location": "/apache2_coredumps/", 
            "text": "For debian systems\n\n\nTo get the cordedump.\n\n\necho \ndeb http://backports.debian.org/debian-backports squeeze-backports main\n \\\n\n /etc/apt/sources.list\napt-get update\napt-get -t squeeze-backports install gdb\napt-get install apache2-dbg php5-dbg\nmkdir /tmp/apache-coredumps\necho \nCoreDumpDirectory /tmp/apache-coredumps\n \n /etc/apache2/httpd.conf\nulimit -c unlimited\napachectl restart\n\n\n\n\nTo read the cordedump.\n\n\ngdb apache2 -core /tmp/apache-coredumps/core\n\n\n\n\nOr\n\n\ngdb /usr/local/apache2/bin/httpd /tmp/apache-coredumps/core\n# (gdb) bt full\n# If MPM Worker\n# (gdb) thread apply all bt full", 
            "title": "Apache2 coredumps"
        }, 
        {
            "location": "/apache2_coredumps/#for-debian-systems", 
            "text": "To get the cordedump.  echo  deb http://backports.debian.org/debian-backports squeeze-backports main  \\  /etc/apt/sources.list\napt-get update\napt-get -t squeeze-backports install gdb\napt-get install apache2-dbg php5-dbg\nmkdir /tmp/apache-coredumps\necho  CoreDumpDirectory /tmp/apache-coredumps    /etc/apache2/httpd.conf\nulimit -c unlimited\napachectl restart  To read the cordedump.  gdb apache2 -core /tmp/apache-coredumps/core  Or  gdb /usr/local/apache2/bin/httpd /tmp/apache-coredumps/core\n# (gdb) bt full\n# If MPM Worker\n# (gdb) thread apply all bt full", 
            "title": "For debian systems"
        }, 
        {
            "location": "/apt_key/", 
            "text": "Add a key\n\n\napt-key adv --recv-keys --keyserver keyserver.example.com keyid\n\n\n\n\nList of keyservers\n\n\n\n\n\n\nkeyserver.ubuntu.com\n\n\n\n\n\n\nsubkeys.pgp.net", 
            "title": "Apt key"
        }, 
        {
            "location": "/apt_key/#add-a-key", 
            "text": "apt-key adv --recv-keys --keyserver keyserver.example.com keyid", 
            "title": "Add a key"
        }, 
        {
            "location": "/apt_key/#list-of-keyservers", 
            "text": "keyserver.ubuntu.com    subkeys.pgp.net", 
            "title": "List of keyservers"
        }, 
        {
            "location": "/asciidoc/", 
            "text": "Commands\n\n\nasciidoc --backend=bootstrap -a source-highlighter=pygments -a theme=readable -a\nfooter -a totop misc_bash.txt\n\nasciidoc --backend=bootstrap -a source-highlighter=pygments -a theme=readable -a\ntotop -a jumbotron -a footer-fullwidth asciidoc.txt", 
            "title": "Asciidoc"
        }, 
        {
            "location": "/asciidoc/#commands", 
            "text": "asciidoc --backend=bootstrap -a source-highlighter=pygments -a theme=readable -a\nfooter -a totop misc_bash.txt\n\nasciidoc --backend=bootstrap -a source-highlighter=pygments -a theme=readable -a\ntotop -a jumbotron -a footer-fullwidth asciidoc.txt", 
            "title": "Commands"
        }, 
        {
            "location": "/aws/", 
            "text": "AMIs\n\n\n\n\nhttp://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html\n\n\nhttps://cloudnative.io/blog/2014/07/paravirtual-vs-hvm-images/\n\n\nUse HVM for  Amazon Linux AMI 2013.09.02 (or later) or any Linux AMI with a version 3.8 (or newer kernel)\n\n\n\n\nVirtualization type\n\n\n\n\nhttp://docs.aws.amazon.com/AWSEC2/latest/UserGuide/virtualization_types.html\n\n\n\n\nPerformance\n\n\n\n\nhttp://brendangregg.com/blog/2015-03-03/performance-tuning-linux-instances-on-ec2.html\n\n\nSR-IOV : VPC with C3, C4, R3 and I2 + HVM", 
            "title": "Aws"
        }, 
        {
            "location": "/aws/#amis", 
            "text": "http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html  https://cloudnative.io/blog/2014/07/paravirtual-vs-hvm-images/  Use HVM for  Amazon Linux AMI 2013.09.02 (or later) or any Linux AMI with a version 3.8 (or newer kernel)", 
            "title": "AMIs"
        }, 
        {
            "location": "/aws/#virtualization-type", 
            "text": "http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/virtualization_types.html", 
            "title": "Virtualization type"
        }, 
        {
            "location": "/aws/#performance", 
            "text": "http://brendangregg.com/blog/2015-03-03/performance-tuning-linux-instances-on-ec2.html  SR-IOV : VPC with C3, C4, R3 and I2 + HVM", 
            "title": "Performance"
        }, 
        {
            "location": "/bash_aliases/", 
            "text": "alias h?=\"history | grep\"", 
            "title": "Bash aliases"
        }, 
        {
            "location": "/bash_background_even_logout/", 
            "text": "nohup ./mytask.sh", 
            "title": "Bash background even logout"
        }, 
        {
            "location": "/bash_last_arg_last_cmd/", 
            "text": "# Example\ncp -p afile /path/to/adir/\n\n# ls to /path/to/adir/\nls !$\n# or\n\nALT+.\n\n# or\n# cat afile\ncat !:2", 
            "title": "Bash last arg last cmd"
        }, 
        {
            "location": "/bash_misc/", 
            "text": "Misc\n\n\n# dm maps to\nlvdisplay|awk  '/LV Name/{n=$3} /Block device/{d=$3; sub(\n.*:\n,\ndm-0\n,d); print d,n;}'\n\n# Identify wich process use the port ...\nfuser 7000/tcp\n# or\nlsof -i :7000\n\n\n# Change or add word into line begin with\nsed -i '/system/ s/$/ wordtotheend/' filename\nsed -i '/^aword/ s/toto/tata/' filename\n\n# Show config file without commented lines\ngrep -v '^#' /etc/file.conf | tr -s '\\n'\n\n# Add something at the begining of the line\nsed -i '/pattern/ s/^/first word/'\n\n# Rescan disks devices\nfind /sys -name rescan -exec sh -c 'echo \n1\n \n $1' -- {} \\;\nfind /sys -name rescan | xargs -I {} sh -c \necho 1 \n {}\n\n\n# Call revious command\nrm /path/to/file # Permission denied\nsudo !!\n\n# Most recent command starting with 'cp'\n!cp\n\n# Numbered command from the history\nhistory | grep sed #\u00a0129 sed -i 's/toto/tata/g' file\n!129\n\n\n\n\nOneliners\n\n\n# Array contains item ?\n[[ \n$array\n =~ \n$item\n\u00a0]]\n\n\n\n\ndie\n\n\ndie () {\n    echo \n2 \n$@\n\n    exit 1\n}\n\n\n\n\nerror\n\n\nerr() {\n    echo \n[$(date +'%Y-%m-%dT%H:%M:%S%z')]: $@\n \n2\n}\n\n\n\n\nlazy log\n\n\nexec 42\n1\nexec \n /tmp/log.test\n\necho \nI'm writing to the log :)\n\n\nexec 1\n42 42\n-\n\n# OR\n\nexec 42\n /tmp/log.test\nexec 1\n42-\n\necho \nI'm writing to the log too :)\n\n\nexec 42\n-\nexec \n1\n\n\n\n\nAdd field in JSON with JQ\n\n\ncat projects.json | jq 'map(. + {useCodeDeploy:false})' \n projects_new.json", 
            "title": "Bash misc"
        }, 
        {
            "location": "/bash_misc/#misc", 
            "text": "# dm maps to\nlvdisplay|awk  '/LV Name/{n=$3} /Block device/{d=$3; sub( .*: , dm-0 ,d); print d,n;}'\n\n# Identify wich process use the port ...\nfuser 7000/tcp\n# or\nlsof -i :7000\n\n\n# Change or add word into line begin with\nsed -i '/system/ s/$/ wordtotheend/' filename\nsed -i '/^aword/ s/toto/tata/' filename\n\n# Show config file without commented lines\ngrep -v '^#' /etc/file.conf | tr -s '\\n'\n\n# Add something at the begining of the line\nsed -i '/pattern/ s/^/first word/'\n\n# Rescan disks devices\nfind /sys -name rescan -exec sh -c 'echo  1    $1' -- {} \\;\nfind /sys -name rescan | xargs -I {} sh -c  echo 1   {} \n\n# Call revious command\nrm /path/to/file # Permission denied\nsudo !!\n\n# Most recent command starting with 'cp'\n!cp\n\n# Numbered command from the history\nhistory | grep sed #\u00a0129 sed -i 's/toto/tata/g' file\n!129", 
            "title": "Misc"
        }, 
        {
            "location": "/bash_misc/#oneliners", 
            "text": "# Array contains item ?\n[[  $array  =~  $item \u00a0]]", 
            "title": "Oneliners"
        }, 
        {
            "location": "/bash_misc/#die", 
            "text": "die () {\n    echo  2  $@ \n    exit 1\n}", 
            "title": "die"
        }, 
        {
            "location": "/bash_misc/#error", 
            "text": "err() {\n    echo  [$(date +'%Y-%m-%dT%H:%M:%S%z')]: $@   2\n}", 
            "title": "error"
        }, 
        {
            "location": "/bash_misc/#lazy-log", 
            "text": "exec 42 1\nexec   /tmp/log.test\n\necho  I'm writing to the log :) \n\nexec 1 42 42 -\n\n# OR\n\nexec 42  /tmp/log.test\nexec 1 42-\n\necho  I'm writing to the log too :) \n\nexec 42 -\nexec  1", 
            "title": "lazy log"
        }, 
        {
            "location": "/bash_misc/#add-field-in-json-with-jq", 
            "text": "cat projects.json | jq 'map(. + {useCodeDeploy:false})'   projects_new.json", 
            "title": "Add field in JSON with JQ"
        }, 
        {
            "location": "/bash_replace_from_last/", 
            "text": "# Example\n\n# List all html files\nls *.html\n\n# Now list all txt files\n^html^txt^", 
            "title": "Bash replace from last"
        }, 
        {
            "location": "/build_deb/", 
            "text": "dh_make --native --indep --yes -f dist/raskiidoc-0.9.tar.gz -p raskiidoc_0.9\ncat \n debian/raskiidoc.install \nEOF\nRakefile usr/share/%{name}\n.rake usr/share/\nscripts/* usr/sbin\nconf/* etc/raskiidoc\nEOF\n# Edit debian/rules if needed\ndpkg-buildpackage", 
            "title": "Build deb"
        }, 
        {
            "location": "/build_raskiidoc/", 
            "text": "VERSION=\"0.9\"\ngit clone https://github.com/Pryz/raskiidoc.git raskiidoc-$VERSION\ncd raskiidoc-$VERSION\nEMAIL=\"ju.pryz@gmail.com\" DEBFULLNAME=\"Julien Fabre\" dh_make --native -p raskiidoc_0.9 -C s\ncd debian\nrm init.d.ex watch.ex prerm.ex postrm.ex preinst.ex postinst.ex raskiidoc.cron.d.ex raskiidoc.d* manpage.*\nmv menu.ex menu\nsed -i 's#url://example.com#https://github.com/llicour/raskiidoc#' copyright\nsed -i 's/\nyears\n/2013/g' copyright\nsed -i '/another author/d' copyright\nsed -i \"s/\nput author's name and email here\n/llicour/g\" copyright\nsed -i '/^#/d' copyright\ncat \n raskiidoc.install \nEOF\nRakefile /usr/share/raskiidoc\nraskiidoc/* /usr/share/raskiidoc\nscripts/raskiidoc /usr/bin/\nconf/* /etc/raskiidoc/\nEOF\ncat \n control \nEOF\nSource: raskiidoc\nSection: misc\nPriority: extra\nMaintainer: Julien Fabre \nju.pryz@gmail.com\n\nBuild-Depends: debhelper (\n= 8.0.0), rubygems, rake-compiler\nStandards-Version: 3.9.4\nHomepage: https://github.com/llicour/raskiidoc\n\nPackage: raskiidoc\nArchitecture: any\nDepends: ${shlibs:Depends}, ${misc:Depends}, ruby, rake, rubygems, python-support (\n= 0.90)\nSuggests: asciidoc\nDescription: Rakefile to simplify generation of asciidoc documents\n Rakefile to simplify generation of asciidoc documents. Asciidoc generation can use complex arguments hard to remember,\n and could be document specific.\nEOF\ncat \n rules \nEOF\noverride_dh_auto_build:\n    make install\nEOF\ncd ..\ntar czf raskiidoc_0.9.orig.tar.gz raskiidoc-0.9\ncd debian\ndebuild -uc -us", 
            "title": "Build raskiidoc"
        }, 
        {
            "location": "/chroot_sftp/", 
            "text": "Configure chroot sftp.\n\n\n/etc/ssh/sshd_config\n\n\n#Subsystem sftp /usr/libexec/openssh/sftp-server\nSubsystem   sftp    internal-sftp -l INFO\n\nMatch group sftpusers\n    ChrootDirectory /sftp/%u\n    ForceCommand internal-sftp -l INFO\n    X11Forwarding no\n    AllowTcpForwarding no\n\n\n\n\nCreate new user - script.\n\n\n#!/bin/bash\n\n\nif [[ $EUID -ne 0 ]];then\n        echo \nThis script must be run as root\n 1\n2\n        exit 1\nfi\n\nif [[ $# -lt 1 ]];then\n        echo \nUsage: $0 username\n\n        exit 1\nfi\n\nUSER=$1\n\nif [ -n \n$(getent passwd $USER)\n ]; then\n        echo \nUser already exists.\n\n        exit 1\nfi\n\n# Create the local user\nuseradd -g sftpusers -s /sbin/nologin -d /sftp/$USER $USER\npasswd $USER\n\n# Create user directories\nchown root:root /sftp/$USER\nchmod 755 /sftp/$USER\nmkdir /sftp/$USER/{dev,in,out}\nchown $USER:sftpusers /sftp/$USER/{in,out}\n\n# Allow access to sftp user\n# /!\\ set the ACL on $USER directory prevent the user to connect /!\\\nsetfacl -R -m u:sftp:rwx /sftp/$USER/{in,out}\n\n# Add log device in rsyslog.conf\necho \n\\$AddUnixListenSocket    /sftp/$USER/dev/log\n \n /etc/rsyslog.conf\n\n/sbin/service rsyslog restart\n\necho \nUser $USER created.\n\n\n\n\n\nNeed other user access to the protected dir.\n\n\nsetfacl -R -d -m :u:sftp:rws /sftp/mf*", 
            "title": "Chroot sftp"
        }, 
        {
            "location": "/create_floppy_ks/", 
            "text": "mkfs.vfat -C \"centos6-floppy.img\" 1440\nmkdir /mnt/floppy\nsudo mkdir /mnt/floppy\nsudo mount -o loop,uid=$UID -t vfat centos6-floppy.img /mnt/floppy\ncp /var/www/ks/ks-rhel6.cfg /mnt/floppy/ks.cfg\nsudo umount /mnt/floppy", 
            "title": "Create floppy ks"
        }, 
        {
            "location": "/create_iso/", 
            "text": "mkisofs -o [filename.iso] [path]", 
            "title": "Create iso"
        }, 
        {
            "location": "/css_custom_font/", 
            "text": "@font-face {\n    font-family: my_custom_font;\n    src: url('http://mysite.com/my_custom_font.ttf'];\n}", 
            "title": "Css custom font"
        }, 
        {
            "location": "/curl_format/", 
            "text": "Display curl statistics with -w :\n\n\n# Create the format file\n$ cat \n /tmp/curl-formats.txt \nEOF\n\\n\n            time_namelookup:  %{time_namelookup}\\n\n               time_connect:  %{time_connect}\\n\n            time_appconnect:  %{time_appconnect}\\n\n           time_pretransfer:  %{time_pretransfer}\\n\n              time_redirect:  %{time_redirect}\\n\n         time_starttransfer:  %{time_starttransfer}\\n\n                            ----------\\n\n                 time_total:  %{time_total}\\n\n\\n\nEOF\n\n# Execute curl\ncurl -v -o /dev/null -w \n@./curl-format.txt\n -s 'http://test.domain.com'", 
            "title": "Curl format"
        }, 
        {
            "location": "/debian_services/", 
            "text": "Simple add service.\n\n\nupdate-rc.d fw.rules defaults\n\n\n\nSimple del service.\n\n\nupdate-rc.d fw.rules remove\n\n\n\nHeader for a service.\n\n\n### BEGIN INIT INFO\n# Provides:          fw.rules\n# Required-Start:    mountkernfs ifupdown $local_fs\n# X-Start-Before:    networking\n# Default-Start:     2 3 4 5\n# Required-Stop:\n# Default-Stop:      0 1 6\n# Short-Description: Configure the iptables firewall.\n# Description:       Configure the iptables firewall.\n### END INIT INFO\n\n\n\nFind a service.\n\n\nls /etc/rc*.d/*|grep service_name", 
            "title": "Debian services"
        }, 
        {
            "location": "/del_lun_mpath/", 
            "text": "# remove LVM layer : vgremove, pvremove\n# show all mpath devices\nmultipath -ll # note sdX paths for the choosen mpathX\n# flush mpath configuration\nmultipath -f mpathX\n# delete paths\nfor i in f h; do echo 1 \n /sys/block/sd$i/device/delete; done", 
            "title": "Del lun mpath"
        }, 
        {
            "location": "/device_mapper_lvm/", 
            "text": "Commands\n\n\nDevice mapper by Logical Volume.\n\n\nlvdisplay|awk '/LV Name/{n=$3} /Block device/{d=$3; sub(\n.*:\n,\ndm-\n,d); print d,n;}'\n\n\n\n\niostat every two seconds with Logical Volume.\n\n\niostat -N 2\n\n\n\n\nDisplay LV with extents.\n\n\nlvdisplay -m\n\n\n\n\nDiscover new devices.\n\n\necho \n- - -\n \n /sys/class/scsi_host/host0/scan\n\necho 1 \n /sys/block/sdc/device/rescan", 
            "title": "Device mapper lvm"
        }, 
        {
            "location": "/device_mapper_lvm/#commands", 
            "text": "Device mapper by Logical Volume.  lvdisplay|awk '/LV Name/{n=$3} /Block device/{d=$3; sub( .*: , dm- ,d); print d,n;}'  iostat every two seconds with Logical Volume.  iostat -N 2  Display LV with extents.  lvdisplay -m  Discover new devices.  echo  - - -    /sys/class/scsi_host/host0/scan\n\necho 1   /sys/block/sdc/device/rescan", 
            "title": "Commands"
        }, 
        {
            "location": "/dhcpd_pxe/", 
            "text": "Install dependencies\n\n\nyum -y install dhcpd\n\n\n\n\nStart service\n\n\nservice dhcpd start\nchkconfig dhcpd on\n\n\n\n\nConfigure the DHCP\n\n\ncat \n /etc/dhcp/dhcpd.conf \n EOF\nsubnet 192.168.0.0 netmask 255.255.255.0 {\n    range 192.168.0.100 192.168.0.200;\n    filename \npxelinux.0\n;\n    option routers 192.168.0.1;\n    option domain-name-servers 89.2.0.1;\n}\nEOF", 
            "title": "Dhcpd pxe"
        }, 
        {
            "location": "/dhcpd_pxe/#install-dependencies", 
            "text": "yum -y install dhcpd", 
            "title": "Install dependencies"
        }, 
        {
            "location": "/dhcpd_pxe/#start-service", 
            "text": "service dhcpd start\nchkconfig dhcpd on", 
            "title": "Start service"
        }, 
        {
            "location": "/dhcpd_pxe/#configure-the-dhcp", 
            "text": "cat   /etc/dhcp/dhcpd.conf   EOF\nsubnet 192.168.0.0 netmask 255.255.255.0 {\n    range 192.168.0.100 192.168.0.200;\n    filename  pxelinux.0 ;\n    option routers 192.168.0.1;\n    option domain-name-servers 89.2.0.1;\n}\nEOF", 
            "title": "Configure the DHCP"
        }, 
        {
            "location": "/django/", 
            "text": "Play with the shell\n\n\nexport DJANGO_SETTINGS_MODULE=settings.docker.py\npython manage.py shell\n\n# Then do whatever you want\nfor app in RegisteredApps.objects.all():\n  print app.name\n\nnew_app = RegisteredApps(name=\ntest\n, order=100)\nnew_app.save()\n\n\n\n\nCollect statics\n\n\npython manage.py collectstatic --settings=settings.docker.py", 
            "title": "Django"
        }, 
        {
            "location": "/docker/", 
            "text": "Log : /var/log/upstart/docker.log\nDefault socket : /var/run/docker.sock\n\n\nMount shared folder for boot2docker\n\n\nVBoxManage sharedfolder add boot2docker-vm -name home -hostpath /Users\n\n\n\n\nClean all docker untagged images\n\n\ndocker rmi $(docker images | awk '/^\nnone\n/ { print $3 }')\n\n\n\n\nNAT port to container\n\n\niptables -t nat -A  DOCKER -p tcp --dport 8001 -j DNAT --to-destination 172.17.0.19:8000", 
            "title": "Docker"
        }, 
        {
            "location": "/docker/#mount-shared-folder-for-boot2docker", 
            "text": "VBoxManage sharedfolder add boot2docker-vm -name home -hostpath /Users", 
            "title": "Mount shared folder for boot2docker"
        }, 
        {
            "location": "/docker/#clean-all-docker-untagged-images", 
            "text": "docker rmi $(docker images | awk '/^ none / { print $3 }')", 
            "title": "Clean all docker untagged images"
        }, 
        {
            "location": "/docker/#nat-port-to-container", 
            "text": "iptables -t nat -A  DOCKER -p tcp --dport 8001 -j DNAT --to-destination 172.17.0.19:8000", 
            "title": "NAT port to container"
        }, 
        {
            "location": "/editable_browser/", 
            "text": "data:text/html, \nbody contenteditable\nstyle=\nfont-size:1rem;line-height:1.4;max-width:60rem;margin:0\nauto;padding:4rem;", 
            "title": "Editable browser"
        }, 
        {
            "location": "/elasticsearch/", 
            "text": "Elasticsearch\n\n\nMaintenance\n\n\ncurl -H 'Content-Type: application/json' -X PUT -d '{\ntransient\n:{\ncluster.routing.allocation.enable\n : \nnone\n}}' http://es-node01.lab:9200/_cluster/settings\n\ncurl -H 'Content-Type: application/json' -X POST http://es-node01.lab:9200/_cluster/nodes/_local/_shutdown\n\ncurl -H 'Content-Type: application/json' -X PUT -d '{\ntransient\n:{\ncluster.routing.allocation.enable\n : \nall\n}}' http://es-node01.lab:9200/_cluster/settings\n\n\ncurl 'localhost:9200/_cat/master?v'\n\ncurl http://log-elasticsearch01.us-east-1d.public:9200/_cat/shards", 
            "title": "Elasticsearch"
        }, 
        {
            "location": "/elasticsearch/#elasticsearch", 
            "text": "", 
            "title": "Elasticsearch"
        }, 
        {
            "location": "/elasticsearch/#maintenance", 
            "text": "curl -H 'Content-Type: application/json' -X PUT -d '{ transient :{ cluster.routing.allocation.enable  :  none }}' http://es-node01.lab:9200/_cluster/settings\n\ncurl -H 'Content-Type: application/json' -X POST http://es-node01.lab:9200/_cluster/nodes/_local/_shutdown\n\ncurl -H 'Content-Type: application/json' -X PUT -d '{ transient :{ cluster.routing.allocation.enable  :  all }}' http://es-node01.lab:9200/_cluster/settings\n\n\ncurl 'localhost:9200/_cat/master?v'\n\ncurl http://log-elasticsearch01.us-east-1d.public:9200/_cat/shards", 
            "title": "Maintenance"
        }, 
        {
            "location": "/emc_powerpath_install/", 
            "text": "System provisioning\n\n\n\n\n\n\n1 path to the SAN during the OS installation. The multipath will be set after the OS provisioning\n\n\n\n\n\n\nBIOS boot device = HBA w/active path = HBA configured to host\n\n\n\n\n\n\nWhen installer loaded \u2192 ctrl+alt+f2 \u2192 ls /dev/sd* \u2192 fdisk -l /dev/sda\n\n\n\n\n\n\nParitioning\n\n\n\n\n\n\n/boot not in the LVM\n\n\n\n\n\n\n/ + swap in the LVM\n\n\n\n\n\n\n\n\n\n\nPowerPath installation\n\n\n\n\n\n\nAfter the completed installation of PowerPath the reboot is obselete\n\n\n\n\n\n\nCheck in /etc/multipath.conf\n\n\n\n\n\n\nblacklist {\n    devnode \n*\n\n}\n\n\n\n\n\n\nThen\n\n\n\n\n# get the rpm on powerlink\nrpm -ivh EMCpower*.rpm\n\n# follow the installation process \n set the licence key\nemcpreg -install\n\n# start powerpath\n/etc/init.d/PowerPath\n\n# Set the usage policy (i.e failovering)\npowermt set policy\n\n# Save the configuration\npowermt save\n\n# Try to display devices\npowermt display dev=all\n\n# Manage the devices mapping\nemcpadm\n\n# Then check if /etc/modprobe.conf is correctly configured\n# i.e :\n# options scsi_mod max_scsi_luns = 256\n# And in /etc/lvm/lvm.conf, check in the EMC doc, depends on OS release\n# i.e :\n# filter = [\na/sda[1-9]$/\n, \na/emcpower.*/\n, \nr/.*/\n]\n# finally\n\nvgscan\n\n\n\n\nPost installation\n\n\n\n\n\n\nIf RHEL5.x change /boot in /etc/fstab with UUID\n\n\n\n\n\n\nAttach new LUNs to the system\n\n\n\n\n\n\n# Save original initrd and build a new one\ncp /boot/initrd-`uname -r`.img /boot/initrd-`uname -r`.orig.img\nmkinitrd -f /boot/initrd-`uname -r`.img `uname -r`\n\n\n\n\n\n\nSave the initrd", 
            "title": "Emc powerpath install"
        }, 
        {
            "location": "/emc_powerpath_install/#system-provisioning", 
            "text": "1 path to the SAN during the OS installation. The multipath will be set after the OS provisioning    BIOS boot device = HBA w/active path = HBA configured to host    When installer loaded \u2192 ctrl+alt+f2 \u2192 ls /dev/sd* \u2192 fdisk -l /dev/sda    Paritioning    /boot not in the LVM    / + swap in the LVM", 
            "title": "System provisioning"
        }, 
        {
            "location": "/emc_powerpath_install/#powerpath-installation", 
            "text": "After the completed installation of PowerPath the reboot is obselete    Check in /etc/multipath.conf    blacklist {\n    devnode  * \n}   Then   # get the rpm on powerlink\nrpm -ivh EMCpower*.rpm\n\n# follow the installation process   set the licence key\nemcpreg -install\n\n# start powerpath\n/etc/init.d/PowerPath\n\n# Set the usage policy (i.e failovering)\npowermt set policy\n\n# Save the configuration\npowermt save\n\n# Try to display devices\npowermt display dev=all\n\n# Manage the devices mapping\nemcpadm\n\n# Then check if /etc/modprobe.conf is correctly configured\n# i.e :\n# options scsi_mod max_scsi_luns = 256\n# And in /etc/lvm/lvm.conf, check in the EMC doc, depends on OS release\n# i.e :\n# filter = [ a/sda[1-9]$/ ,  a/emcpower.*/ ,  r/.*/ ]\n# finally\n\nvgscan", 
            "title": "PowerPath installation"
        }, 
        {
            "location": "/emc_powerpath_install/#post-installation", 
            "text": "If RHEL5.x change /boot in /etc/fstab with UUID    Attach new LUNs to the system    # Save original initrd and build a new one\ncp /boot/initrd-`uname -r`.img /boot/initrd-`uname -r`.orig.img\nmkinitrd -f /boot/initrd-`uname -r`.img `uname -r`   Save the initrd", 
            "title": "Post installation"
        }, 
        {
            "location": "/emc_powerpath_misc/", 
            "text": "Add a LUN\n\n\n# Number of loops depends of the host\nfor i in 0 1 2 3; do echo \n- - -\n \n /sys/class/scsi_host/host$i/scan; done\n# Configure new finded LUN(s)\npowermt config\npowermt display\n\n\n\n\nDelete a LUN\n\n\n# disable I/O on the device and then\npowermt display dev=emcpowerX # get all sdX paths\npowermt remove dev=emcpowerX\npowermt release dev=emcpowerX\n# Now the device is not use/usable anymore\n# You have to clean all the paths\nfor i in d f h; do echo 1 \n /sys/block/sd$i/device/delete\n# You can now remove the device from the rack\n# Check all remaining devices\npowermt display dev=all\n\n\n\n\nAdd new path\n\n\n# Connect the path(s) to the host, then\n# Discover new path(s)\nfor i in 1 2 3; do echo \n- - -\n \n /sys/class/scsi_host/host$i/scan; done\n\n# Configure new path(s)\npowermt config\n\n# Check if powerpath see new path(s)\npowermt display dev=all\n\n# Test new path(s)\npowermt restore\n\n# Save the configuration\npowermt save\n\n\n\n\nGet key from installed host\n\n\npowermt check_registration", 
            "title": "Emc powerpath misc"
        }, 
        {
            "location": "/emc_powerpath_misc/#add-a-lun", 
            "text": "# Number of loops depends of the host\nfor i in 0 1 2 3; do echo  - - -    /sys/class/scsi_host/host$i/scan; done\n# Configure new finded LUN(s)\npowermt config\npowermt display", 
            "title": "Add a LUN"
        }, 
        {
            "location": "/emc_powerpath_misc/#delete-a-lun", 
            "text": "# disable I/O on the device and then\npowermt display dev=emcpowerX # get all sdX paths\npowermt remove dev=emcpowerX\npowermt release dev=emcpowerX\n# Now the device is not use/usable anymore\n# You have to clean all the paths\nfor i in d f h; do echo 1   /sys/block/sd$i/device/delete\n# You can now remove the device from the rack\n# Check all remaining devices\npowermt display dev=all", 
            "title": "Delete a LUN"
        }, 
        {
            "location": "/emc_powerpath_misc/#add-new-path", 
            "text": "# Connect the path(s) to the host, then\n# Discover new path(s)\nfor i in 1 2 3; do echo  - - -    /sys/class/scsi_host/host$i/scan; done\n\n# Configure new path(s)\npowermt config\n\n# Check if powerpath see new path(s)\npowermt display dev=all\n\n# Test new path(s)\npowermt restore\n\n# Save the configuration\npowermt save", 
            "title": "Add new path"
        }, 
        {
            "location": "/emc_powerpath_misc/#get-key-from-installed-host", 
            "text": "powermt check_registration", 
            "title": "Get key from installed host"
        }, 
        {
            "location": "/encrypt_pass_ks/", 
            "text": "python -c 'import crypt; print(crypt.crypt(\nTHEPASSWORD\n, \n$6$THESALT\n))'", 
            "title": "Encrypt pass ks"
        }, 
        {
            "location": "/ganglia/", 
            "text": "gmond : daemon running on all monitored nodes.\n\n\n\n\n\n\ngmetad : run on only master. Collects data from gmond instances.\n\n\n\n\n\n\nhead node : \"bridge\" for group nodes.\n\n\n\n\n\n\nGMOND: sender \u21d2 collect metrics\n\n\n\n\n\n\nreceiver \u21d2 aggregate all metrics send from other hosts\n\n\n\n\n\n\nkeep an in memory cached of all metrics\n\n\n\n\n\n\n\n\n\n\nGMETAD: pools gmonds and stores metrics to RRD files\n\n\n\n\n\n\nGenerate default configuration if not present\n\n\ngmond --default_config \n /etc/gmond.conf\n\n\n\n\nClassic node configuration\n\n\ncluster {\n    name = \ncluster1\n\n}\n\nudp_send_channel {\n    host = head_node1\n    port = 8649\n}\n\ntcp_accept_channel {\n    port = 8649\n}\n\n# to comment : multicast and udp_recv_channel\n\n\n\n\n\n\n\n\ngmond.conf\n\n\n\n\n\n\ncluster:name = clustername\n\n\n\n\n\n\nudp_send_channel:host = 10.2.3.36 + :port = 8649\n\n\n\n\n\n\nudp_recv_channel:empty\n\n\n\n\n\n\ntcp_accept_channel:port = 8649\n\n\n\n\n\n\n\n\n\n\nHead node configuration\n\n\ncluster {\n    name = \ncluster1\n\n}\n\nudp_recv_channel {\n    port = 8649\n}\n\ntcp_accept_channel {\n    port = 8649\n}\n\n# to comment : multicast and udp_send_channel\n\n\n\n\nMaster\n\n\n\n\n\n\ngmond.conf\n\n\n\n\n\n\ncluster:name = clustername\n\n\n\n\n\n\nudp_send_channel:host = 10.2.3.36 + :port = 8649\n\n\n\n\n\n\nudp_recv_channel:host = 10.2.3.36 + :port = 8649\n\n\n\n\n\n\ntcp_accept_channel:port = 8649\n\n\n\n\n\n\n\n\n\n\ngmetad.conf\n\n\n\n\ndata_source \"clustername\" 12.2.3.36", 
            "title": "Ganglia"
        }, 
        {
            "location": "/ganglia/#generate-default-configuration-if-not-present", 
            "text": "gmond --default_config   /etc/gmond.conf", 
            "title": "Generate default configuration if not present"
        }, 
        {
            "location": "/ganglia/#classic-node-configuration", 
            "text": "cluster {\n    name =  cluster1 \n}\n\nudp_send_channel {\n    host = head_node1\n    port = 8649\n}\n\ntcp_accept_channel {\n    port = 8649\n}\n\n# to comment : multicast and udp_recv_channel    gmond.conf    cluster:name = clustername    udp_send_channel:host = 10.2.3.36 + :port = 8649    udp_recv_channel:empty    tcp_accept_channel:port = 8649", 
            "title": "Classic node configuration"
        }, 
        {
            "location": "/ganglia/#head-node-configuration", 
            "text": "cluster {\n    name =  cluster1 \n}\n\nudp_recv_channel {\n    port = 8649\n}\n\ntcp_accept_channel {\n    port = 8649\n}\n\n# to comment : multicast and udp_send_channel", 
            "title": "Head node configuration"
        }, 
        {
            "location": "/ganglia/#master", 
            "text": "gmond.conf    cluster:name = clustername    udp_send_channel:host = 10.2.3.36 + :port = 8649    udp_recv_channel:host = 10.2.3.36 + :port = 8649    tcp_accept_channel:port = 8649      gmetad.conf   data_source \"clustername\" 12.2.3.36", 
            "title": "Master"
        }, 
        {
            "location": "/gem2rpm/", 
            "text": "yum -y install rubygem-gem2rpm.noarch rubygem-gem2rpm-doc.noarch\nrpmdev-setuptree\ncd ~/rpmbuild/SOURCES\nsudo gem --debug fetch puppet-lint\nsudo gem2rpm puppet-lint-0.3.2.gem \n ~/rpmbuild/SPECS/puppet-lint-0.3.2.spec\nmock -r default --buildsrpm --spec SPECS/puppet-lint-0.3.2.spec --sources\nSOURCES/\nmock -r default rebuild SRPMS/rubygem-puppet-lint-0.3.2-1.el6.src.rpm\n#or\nrpmbuild --rebuild SRPMS/rubygem-puppet-lint-0.3.2-1.el6.src.rpm\n\n\n\nTroubleshoots.\n\n\nif error: Installed (but unpackaged) file(s) found, add following in spec file\n\n\n%define _unpackaged_files_terminate_build 0", 
            "title": "Gem2rpm"
        }, 
        {
            "location": "/generate_sar/", 
            "text": "LC_ALL=C sar -A \n /tmp/`hostname`_`date +\n%d-%m-%Y\n`.sar", 
            "title": "Generate sar"
        }, 
        {
            "location": "/git_tips/", 
            "text": "# Merge master with a debug branch\ngit merge --no-commit -s resolve debug_branch_name\n\n# Delete a remote branch\ngit push origin --delete remote_branch_name\n# or\ngit branch -rd origin/remote_branch_name\n\n# Github - enable ssh keys\ngit remote set-url origin git@github.com:user/repo.git\n\n# Create a local repository\nNAMEREPO='myrepo'\nREPOPATH='/opt/git'\ngit init\ngit add .\ngit commit -a\ncd /opt/git\ngit clone --bare /home/bob/$NAMEREPO $NAMEREPO.git\ncd $NAMEREPO.git\ntouch git-daemon-export-ok\ngit --bare update-server-info\nchmod a+x hooks/post-update\ncat \n $REPOPATH/$NAMEREPO/config \n EOF\n[daemon]\n        receivepack = true\nEOF\n\n\n\n\nUse Proxy.\n\n\ncat \n ~/.gitconfig \nEOF\n[http]\n    proxy = http://user@proxy.my.domain:port\nEOF\n\n\n\nDebug.\n\n\nGIT_TRACE=1 GIT_CURL_VERBOSE=1 git clone https://whololo/git\n\n\n\nUnstage a file.\n\n\ngit reset HEAD filename\n\n\n\nDelete a remote branch.\n\n\ngit push origin :branchname\n\n\n\nUse tage to versioning.\n\n\n# Add a new tag\ngit tag -a \"v0.1\" -m \"comment\"\n\n# Push the tag\ngit push --tags\n\n# Rollback to tag\ngit checkout tagname\n\n\n\nWith branch : use rebase !.\n\n\ngit fetch\ngit rebase\n# if conflicts\ngit add filewithconflict\ngit rebase --continue\n#or\ngit rebase --skip\n#or\ngit rebase --abort\n\n\n\nColors and logs.\n\n\ngit config --global color.ui true\ngit log --oneline -p\ngit log --oneline --stat\ngit log --oneline --graph\n\n\n\nGit diff five commits ago.\n\n\ngit diff HEAD~5\n\n\n\nGit log with changes.\n\n\ngit log -p\n\n\n\nInteractive rebase.\n\n\ngit rebase -i HEAD~4\n\n\n\nDelete a tag in local \n remote.\n\n\ngit tag -d v0.1\ngit push origin :refs/tags/v0.1\n\n\n\nDelete last commit.\n\n\ngit reset --hard HEAD^\ngit push --force\n\n\n\nDelete a submodule.\n\n\ngit deinit submodulename\ngit rm --cache path/to/submodule\n\n\n\nOther submodule tips.\n\n\ngit push --recurse-submodules=on-demand/check\n\ngit submodule foreach git pull origin master\n\n\n\nReflogs.\n\n\ngit reflog\ngit log --walk-reflogs\n\n\n\nAliases.\n\n\n[alias]\n    co      = checkout\n    ci      = commit\n    st      = status\n    br      = branch\n    hist    = log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short\n    type    = cat-file -t\n    dump    = cat-file -p\n    lol     = log --graph --decorate --pretty=oneline --abbrev-commit --all\n    pushall = push --recurse-submodules=on-demand\n\n\n\nGit GUI.\n\n\ngitx", 
            "title": "Git tips"
        }, 
        {
            "location": "/gor/", 
            "text": "Install Golang and Gor\n\n\napt-get install golang\nmkdir /usr/local/go; export GOPATH=/usr/local/go\ngo get github.com/buger/gor\ncd $GOPATH/src/github.com/buger/gor\ngo build\n\n\n\n\nReplicate HTTP traffic from port 8080 to Trusty02 port 8042\n\n\n./gor --input-raw :8080 --output-http \nhttp://trusty02:8042\n\n\n\n\n\nCheck replicated traffic with tcpdump :\n\n\ntcpdump -i eth1 -s 0 'tcp port 8042'\n\n\n\n\nDump with header\n\n\ntcpdump -vvvs 1024 -l -i eth1 -n host 172.28.128.3\n\n\n\n\nSame with files\n\n\n# write to file\ngor --input-raw :80 --output-file /tmp/requests.gor\n\n# read from file\ngor --input-file /tmp/requests.gor --output-http \nhttp://trusty02:8042", 
            "title": "Gor"
        }, 
        {
            "location": "/gor/#install-golang-and-gor", 
            "text": "apt-get install golang\nmkdir /usr/local/go; export GOPATH=/usr/local/go\ngo get github.com/buger/gor\ncd $GOPATH/src/github.com/buger/gor\ngo build", 
            "title": "Install Golang and Gor"
        }, 
        {
            "location": "/gor/#replicate-http-traffic-from-port-8080-to-trusty02-port-8042", 
            "text": "./gor --input-raw :8080 --output-http  http://trusty02:8042", 
            "title": "Replicate HTTP traffic from port 8080 to Trusty02 port 8042"
        }, 
        {
            "location": "/gor/#check-replicated-traffic-with-tcpdump", 
            "text": "tcpdump -i eth1 -s 0 'tcp port 8042'", 
            "title": "Check replicated traffic with tcpdump :"
        }, 
        {
            "location": "/gor/#dump-with-header", 
            "text": "tcpdump -vvvs 1024 -l -i eth1 -n host 172.28.128.3", 
            "title": "Dump with header"
        }, 
        {
            "location": "/gor/#same-with-files", 
            "text": "# write to file\ngor --input-raw :80 --output-file /tmp/requests.gor\n\n# read from file\ngor --input-file /tmp/requests.gor --output-http  http://trusty02:8042", 
            "title": "Same with files"
        }, 
        {
            "location": "/gpg_notes/", 
            "text": "Create a GPG key.\n\n\ngpg --gen-key\n\n\n\nExport private key.\n\n\ngpg --export-secret-keys --armor mail@domain.local \n mail-privkey.asc\n\n\n\nExport public key.\n\n\ngpg --export --armor mail@domain.local \n mail-pubkey.asc", 
            "title": "Gpg notes"
        }, 
        {
            "location": "/hiera_redis/", 
            "text": "Since Puppet 3.x, Hiera will automatically looks up for parameter variables. We don\u2019t need to set $naming = hiera(\nsandbox::naming\n, \nPryz\n) anymore.\n\n\nVariables.\n\n\n# Define a variable for a module\nset common:modulename::variable \nvalue\n #'common' = all host with the module\n\n# Define a var for a module for a specified host\nset nodename:modulename::variable \nvalue\n # 'nodename' = name like in cert list\n\n\n\n\nClasses.\n\n\n# Add classes to a specific node with a set\nsadd nodename:classes modulename # for init.pp\nsadd nodename:classes modulename::classname # for classname.pp\n\n# Add classes to all hosts\nsadd common:classes modulename # for init.pp\nsadd common:classes modulename::classname # for classname.pp\n\n#\u00a0To see all classes\nsmembers common:classes\n\n\n\n\nRedis and booleans.\n\n\nIn Redis all value are strings so true == \ntrue\n. So, we need the following\n\n\nensure  =\n $up? { true =\n running, 'true' =\n running, default =\n stopped },", 
            "title": "Hiera redis"
        }, 
        {
            "location": "/http_ssl_certificate/", 
            "text": "Generate the key and the certicate request.\n\n\nopenssl genrsa -out localhost.localdomain.key 2048\nopenssl req -new -key localhost.localdomain.key -out localhost.localdomain.csr\n\n\n\n\nThen you can send the .csr to your certificate provider.\n\n\nDisplay certificate request informations.\n\n\nopenssl req -noout -text -in localhost.localdomain.csr\n\n\n\n\nopenssl req -nodes -new \\\n    -keyout localhost.localdomain.key.pem \\\n    -out localhost.localdomain.csr.pem\n\n\n\nVirtualhost configuration.\n\n\nSSLEngine on\nSSLCertificateFile /path/to/your_domain_name.crt\nSSLCertificateKeyFile /path/to/your_private.key\nSSLCertificateChainFile /path/to/DigiCertCA.crt", 
            "title": "Http ssl certificate"
        }, 
        {
            "location": "/io_benchmark/", 
            "text": "Write tests\n\n\nBasic write with cache.\n\n\ndd if=/dev/zero of=/home/db/outfile count=1024 bs=2048k\n\n\n\n\nWrite in direct IO.\n\n\ndd if=/dev/zero iflag=direct of=/home/db/outfile oflag=direct count=10240 bs=2048k\n\n\n\n\nWrite in fast data sync to device.\n\n\ndd if=/dev/zero of=/tmp/test.data bs=1M count=1024 conv=fdatasync\n\n\n\n\nRead tests\n\n\nRead.\n\n\ndd if=/home/db/outfile of=/dev/null bs=4096k\n\n\n\n\nRead with and without cache.\n\n\nhdparm -t -T /dev/mapper/datavg-datalv\n\n\n\n\nMore informations about command.\n\n\nCOMMAND=`ls -la`\n/usr/bin/time -v $COMMAND\n# Major (requiring I/O) page faults: 5\n# Minor (reclaiming a frame) page faults: 443\n\n\n\n\nHow to generate variable disk IO\n\n\nCreate a random big file (4GB).\n\n\ndd if=/dev/random of=/tmp/largefile bs=1024 count=4000000", 
            "title": "Io benchmark"
        }, 
        {
            "location": "/io_benchmark/#write-tests", 
            "text": "Basic write with cache.  dd if=/dev/zero of=/home/db/outfile count=1024 bs=2048k  Write in direct IO.  dd if=/dev/zero iflag=direct of=/home/db/outfile oflag=direct count=10240 bs=2048k  Write in fast data sync to device.  dd if=/dev/zero of=/tmp/test.data bs=1M count=1024 conv=fdatasync", 
            "title": "Write tests"
        }, 
        {
            "location": "/io_benchmark/#read-tests", 
            "text": "Read.  dd if=/home/db/outfile of=/dev/null bs=4096k  Read with and without cache.  hdparm -t -T /dev/mapper/datavg-datalv  More informations about command.  COMMAND=`ls -la`\n/usr/bin/time -v $COMMAND\n# Major (requiring I/O) page faults: 5\n# Minor (reclaiming a frame) page faults: 443", 
            "title": "Read tests"
        }, 
        {
            "location": "/io_benchmark/#how-to-generate-variable-disk-io", 
            "text": "Create a random big file (4GB).  dd if=/dev/random of=/tmp/largefile bs=1024 count=4000000", 
            "title": "How to generate variable disk IO"
        }, 
        {
            "location": "/iptables/", 
            "text": "Save current running configuration.\n\n\nservice iptables save\n\n\n\n\nFirewalling.\n\n\niptables -P INPUT DROP # drop all input packages\niptables -A INPUT -j ACCEPT # accept all input packages\niptables -F # to flush all rules\niptables -A INPUT -i lo -j ACCEPT # accept input packages from loopback\niptables -A INPUT -m state --state ESTABLISHED,RELATED\niptables -A INPUT -m state --state NEW -p tcp --dport 22 -j ACCEPT\niptables -A INPUT -s 192.168.123.0/24 -j REJECT # reject all input packages from network\niptables -A INPUT -p icmp -s 192.168.123.0/24 -j ACCEPT # accept all icmp traffic from network\n\n\n\n\nNAT.\n\n\niptables -t nat -L\n# tous les packages provenant d'eth0 auront la m\u00eame IP source\niptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n# tous les packages provenant d'eth0 auront la m\u00eame IP source\niptables -t nat -A POSTROUTING -s 192.168.123.143 -j MASQUERADE\n# les packages a destination du port 80 seront forward\u00e9s vers l'ip 192.168.123.143\niptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination 192.168.123.143\n\n\n\n\nAllow ip forwarding.\n\n\nsysctl -w net.ipv4.ip_forward=1\n\n\n\n\nexport FACTER_foo=1\nfacter foo", 
            "title": "Iptables"
        }, 
        {
            "location": "/iscsi_centos/", 
            "text": "yum -y install iscsi-initiator-utils\n\n\nDiscover iSCSI targets\n\n\niscsiadm -m discovery -t st -p $IP_storage_srv\n\n\n\nLog in to iSCSI targets\n\n\niscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv\n\n\n\nLog out and delete local targets\n\n\niscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv -u\niscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv -o delete", 
            "title": "Iscsi centos"
        }, 
        {
            "location": "/iscsi_centos/#discover-iscsi-targets", 
            "text": "iscsiadm -m discovery -t st -p $IP_storage_srv", 
            "title": "Discover iSCSI targets"
        }, 
        {
            "location": "/iscsi_centos/#log-in-to-iscsi-targets", 
            "text": "iscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv", 
            "title": "Log in to iSCSI targets"
        }, 
        {
            "location": "/iscsi_centos/#log-out-and-delete-local-targets", 
            "text": "iscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv -u\niscsiadm -m node -T iqn.2012-10.net.example:disks.lab -p $IP_storage_srv -o delete", 
            "title": "Log out and delete local targets"
        }, 
        {
            "location": "/iso_bootstrap/", 
            "text": "apt-get install syslinux\nmkdir isoname\nmount -o loop /home/ju/ISO/CentOS-6.3-x86_64-bin-DVD1.iso /mnt/centos6iso\nrsync -avz /mnt/centos6iso/isolinux isoname/isolinux\nvi isoname/isolinux/isolinux.cfg\nmkisofs -o centos-bootstrap.iso -b isolinux/isolinux.bin -c isolinux/boot.cat \\\n-no-emul-boot -boot-load-size 4 -boot-info-table iso", 
            "title": "Iso bootstrap"
        }, 
        {
            "location": "/java_troubleshooting/", 
            "text": "Using jstatd\n\n\n# cat /opt/java/jstatd.all.policy\ngrant codebase \nfile:/opt/java/lib/tools.jar\n {\n     permission java.security.AllPermission;\n};\n\n\n\n\n/opt/java/bin/jstatd -p 2345 -J-Djava.security.policy=/opt/java/jstatd.all.policy -J-Djava.rmi.server.hostname=$fqdn\n\n\n\n\nGarbage collector resources", 
            "title": "Java troubleshooting"
        }, 
        {
            "location": "/java_troubleshooting/#using-jstatd", 
            "text": "# cat /opt/java/jstatd.all.policy\ngrant codebase  file:/opt/java/lib/tools.jar  {\n     permission java.security.AllPermission;\n};  /opt/java/bin/jstatd -p 2345 -J-Djava.security.policy=/opt/java/jstatd.all.policy -J-Djava.rmi.server.hostname=$fqdn", 
            "title": "Using jstatd"
        }, 
        {
            "location": "/java_troubleshooting/#garbage-collector-resources", 
            "text": "", 
            "title": "Garbage collector resources"
        }, 
        {
            "location": "/jboss_https/", 
            "text": "In the choosen profile, go to : Web \u2192 Servlet/HTTP\n\n\n\n\n\n\nAdd a HTTPS Connector\n\n\n\n\n\n\nCheck the HTTPS port in Socket Binding (By default : 8443)\n\n\n\n\n\n\nThen create the keystore\n\n\n\n\n\n\n# Follow the procedure and note the password\nkeytool --genkey -keyalg RSA -alias ssl -keystore ssl.keystore\n\n\n\n\n\n\nThen we create the ssl configuration with the CLI\n\n\n\n\ncd /profile=ha/subsystem=web/connector=https/ssl\nconfiguration:add(name=https)\nconfiguration:write-attribute(name=certificate-key-file,value=/home/student/ssl.keystore)\nconfiguration:write-attribute(name=password,value=plokiploki)\nconfiguration:write-attribute(name=key-alias,value=ssl)\n\n\n\n\n\n\n\n\nIn order to test : deploy an application and test it.\n\n\n\n\ni.e : \nhttps://10.0.1.14:8543/example\n (8443 + port offset)", 
            "title": "Jboss https"
        }, 
        {
            "location": "/jboss_misc/", 
            "text": "Create a postgresql driver\n\n\njar tf postgresql-9.0.jar|grep -i driver\n#org/postgresql/Driver$1.class\n\nmkdir -p META-INF/services\necho org.postgresql.Driver \n META-INF/services/java.sql.Driver\n\njar uf postgresql-9.0.jar META-INF/services/java.sql.Driver", 
            "title": "Jboss misc"
        }, 
        {
            "location": "/jboss_misc/#create-a-postgresql-driver", 
            "text": "jar tf postgresql-9.0.jar|grep -i driver\n#org/postgresql/Driver$1.class\n\nmkdir -p META-INF/services\necho org.postgresql.Driver   META-INF/services/java.sql.Driver\n\njar uf postgresql-9.0.jar META-INF/services/java.sql.Driver", 
            "title": "Create a postgresql driver"
        }, 
        {
            "location": "/jboss_vault/", 
            "text": "Create the vault and store password\n\n\n# Create the keystore\nkeytool -genkey -keyalg RSA -keysize 1024 -alias vault -keystore vault.keystore\n\n# Store password into the keystore with the vault\n./vault.sh\n\n#  Enter directory to store encrypted files (... \\ based on Unix or Windows:/home/student/\n#  Enter Keystore URL:/home/student/vault.keystore\n#  Enter Keystore password:\n#  Enter Keystore password again:\n#  Values match\n#  Enter 8 character salt:12345678\n#  Enter iteration count as a number (Eg: 44):50\n#  (...)\n#  ********************************************\n#  Masked Password:MASK-20Mquir8d.W/ashplp.8ZZ\n#  salt:12345678\n#  Iteration Count:50\n#  ********************************************\n#  Enter Keystore Alias:vault\n#  (...)\n#  Please enter a Digit::   0: Store a password  1: Check whether password exists  2: Exit\n#  0\n#  (...)\n#  Please make note of the following:\n#  ********************************************\n#  Vault Block:postgres\n#  Attribute Name:postgres\n#  Shared Key:MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0\n#  Configuration should be done as follows:\n#  VAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0\n#  ********************************************\n\n\n\n\nUse the encrypted password in Datasource\n\n\n\n\n\n\nEdit domain.xml\n\n\n\n\n\n\nFind the Datasource and replace the password by :\n\n\n\n\nVAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0", 
            "title": "Jboss vault"
        }, 
        {
            "location": "/jboss_vault/#create-the-vault-and-store-password", 
            "text": "# Create the keystore\nkeytool -genkey -keyalg RSA -keysize 1024 -alias vault -keystore vault.keystore\n\n# Store password into the keystore with the vault\n./vault.sh\n\n#  Enter directory to store encrypted files (... \\ based on Unix or Windows:/home/student/\n#  Enter Keystore URL:/home/student/vault.keystore\n#  Enter Keystore password:\n#  Enter Keystore password again:\n#  Values match\n#  Enter 8 character salt:12345678\n#  Enter iteration count as a number (Eg: 44):50\n#  (...)\n#  ********************************************\n#  Masked Password:MASK-20Mquir8d.W/ashplp.8ZZ\n#  salt:12345678\n#  Iteration Count:50\n#  ********************************************\n#  Enter Keystore Alias:vault\n#  (...)\n#  Please enter a Digit::   0: Store a password  1: Check whether password exists  2: Exit\n#  0\n#  (...)\n#  Please make note of the following:\n#  ********************************************\n#  Vault Block:postgres\n#  Attribute Name:postgres\n#  Shared Key:MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0\n#  Configuration should be done as follows:\n#  VAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0\n#  ********************************************", 
            "title": "Create the vault and store password"
        }, 
        {
            "location": "/jboss_vault/#use-the-encrypted-password-in-datasource", 
            "text": "Edit domain.xml    Find the Datasource and replace the password by :   VAULT::postgres::postgres::MjU5MmU3YzAtNmQ3Yi00MDNiLWIwNjUtNmUzMjQ3YzE3ZTNjTElORV9CUkVBS3ZhdWx0", 
            "title": "Use the encrypted password in Datasource"
        }, 
        {
            "location": "/jenkins/", 
            "text": "Some notes about some Jenkins plugins", 
            "title": "Jenkins"
        }, 
        {
            "location": "/jenkins_puppet/", 
            "text": "for file in $(find . -iname '*.pp'); do\n    puppet parser validate --render-as s --modulepath=modules \n$file\n \\\n    || exit 1;\ndone;\n\n\n\n\nfind . -iname *.pp -exec puppet-lint --no-autoloader_layout-check \\\n--log-format \n%{path}:%{linenumber}:%{check}:%{KIND}:%{message}\n {} \\;\n\n\n\n\nGit polling when receives a push.\n\n\nGITURL=git://puppet.localdomain\nREPONAME=zabbix\ncat \n /var/lib/git/$REPONAME/hooks/post-receive\n#!/bin/bash\nexec curl --silent \\\nhttp://jenkins:8080/git/notifyCommit?url=$GITURL/$REPONAME\n\n\n\n\nGet jenkins cli.\n\n\nwget http://jenkins:8080/jnlpJars/jenkins-cli.jar\n\n\n\n\nScript to create a job with the cli.\n\n\n#!/bin/bash\n\nif [ -z $1 ]; then\n    echo \nUsage : $O \njobname|modulename\n\n    exit 1\nfi\n\njobname=$1\njenkinsurl=http://jenkins:8080/\n\ncp config.xml.sample config.xml\nsed -i \ns/REPONAME/$jobname/g\n config.xml\ncat config.xml | java -jar jenkins-cli.jar -s $jenkinsurl create-job $jobname", 
            "title": "Jenkins puppet"
        }, 
        {
            "location": "/kafka/", 
            "text": "Troubleshooting\n\n\nUnder-replicated partitions\n\n\nlolo\n\n\nexport ZK=\n--zookeeper zk01,zk02,zk03:2181/kafka\n\n/opt/kafka/bin/kafka-topics.sh $ZK --describe --under-replicated-partitions\n\n\n\n\nUnder-replicated partitions can mean :\n\n\n\n\nThe Cluster is overloaded and followers are not able to catch up on leaders. Check load, network, ...\n\n\nWe lost one or more Kafka instances. If so check we have at least 1 leader for each partition.  If not the partition will be unavailable.\n\n\nWe have or had inconsistencies on the Zookeeper cluster (leading to standalone zookeepers at 1 point). Check the ZK and Exhibitor logs on each Zookeeper servers.\n\n\n\n\nUnavailable partitions\n\n\nexport ZK=\n--zookeeper zk01,zk02,zk03:2181/kafka\n\n/opt/kafka/bin/kafka-topics.sh $ZK --describe --unavailable-partitions\n\n\n\n\nIf a partition is unavailable it means that it has no leader (and no in-sync replicas to promote to leader), and thus no reads and writes can be done on it.  If it ever happens, check if all servers are up, and escalate to stats team. Those will also appear with a \"-1\" in the leader column when checking the \"--under-replicated-partitions\".\n\n\nServer is leader of no partition\n\n\nEach server is the preferred replica for a set of partitions.  The preferred replica for a partition is the default leader.  Each server should be the preferred replica for the same number of partitions as all the other servers. However, it is possible that, as leadership is transferred among replicas, certain servers will not be leader of any partitions, and others will be the leader of too many.  If this is the case, reads and writes will be imbalanced across the cluster.\n\n\nexport ZK=\n--zookeeper zk01,zk02,zk03:2181/kafka\n\n/opt/kafka/bin/kafka-preferred-replica-election.sh $ZK\n\n\n\n\nIncrease of replication factor on an existing topic\n\n\nFollow: http://kafka.apache.org/documentation.html#basic_ops_increase_replication_factor\nIn our case, that would be for example:\n\n\nexport ZK=\n--zookeeper zk01,zk02,zk03:2181/kafka\n\n/opt/kafka/bin/kafka-topics.sh $ZK --describe\ncat /mnt/increase-replication-factor.json\n{\nversion\n:1,\n\npartitions\n:[\n{\ntopic\n:\nmy_topic\n,\npartition\n:0,\nreplicas\n:[2,3,7]}\n]}\n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/increase-replication-factor.json --execute\n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/increase-replication-factor.json --verify\n\n\n\n\nChange the \"Preferred Replica\" of a partition\n\n\ncat /mnt/change-replicas.json\n{\nversion\n:1,\n\npartitions\n:[\n{\ntopic\n:\nmy_topic\n,\npartition\n:3,\nreplicas\n:[4,1,7]}\n]}\nexport ZK=\n--zookeeper zk01,zk02,zk03:2181/kafka\n\n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/change-replicas.json --execute\n/opt/kafka/bin/kafka-preferred-replica-election.sh $ZK\n\n\n\n\nChange the retention period of a topic\n\n\n/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic my_topic --config retention.ms=43200000\n/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic my_topic --deleteConfig retention.ms\n\n\n\n\nAdd more partitions to a topic\n\n\n/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic rollup_event --partitions 12\n\n\n\n\nAdding partitions invole a rebalancing of the topic", 
            "title": "Kafka"
        }, 
        {
            "location": "/kafka/#troubleshooting", 
            "text": "", 
            "title": "Troubleshooting"
        }, 
        {
            "location": "/kafka/#under-replicated-partitions", 
            "text": "lolo  export ZK= --zookeeper zk01,zk02,zk03:2181/kafka \n/opt/kafka/bin/kafka-topics.sh $ZK --describe --under-replicated-partitions  Under-replicated partitions can mean :   The Cluster is overloaded and followers are not able to catch up on leaders. Check load, network, ...  We lost one or more Kafka instances. If so check we have at least 1 leader for each partition.  If not the partition will be unavailable.  We have or had inconsistencies on the Zookeeper cluster (leading to standalone zookeepers at 1 point). Check the ZK and Exhibitor logs on each Zookeeper servers.", 
            "title": "Under-replicated partitions"
        }, 
        {
            "location": "/kafka/#unavailable-partitions", 
            "text": "export ZK= --zookeeper zk01,zk02,zk03:2181/kafka \n/opt/kafka/bin/kafka-topics.sh $ZK --describe --unavailable-partitions  If a partition is unavailable it means that it has no leader (and no in-sync replicas to promote to leader), and thus no reads and writes can be done on it.  If it ever happens, check if all servers are up, and escalate to stats team. Those will also appear with a \"-1\" in the leader column when checking the \"--under-replicated-partitions\".", 
            "title": "Unavailable partitions"
        }, 
        {
            "location": "/kafka/#server-is-leader-of-no-partition", 
            "text": "Each server is the preferred replica for a set of partitions.  The preferred replica for a partition is the default leader.  Each server should be the preferred replica for the same number of partitions as all the other servers. However, it is possible that, as leadership is transferred among replicas, certain servers will not be leader of any partitions, and others will be the leader of too many.  If this is the case, reads and writes will be imbalanced across the cluster.  export ZK= --zookeeper zk01,zk02,zk03:2181/kafka \n/opt/kafka/bin/kafka-preferred-replica-election.sh $ZK", 
            "title": "Server is leader of no partition"
        }, 
        {
            "location": "/kafka/#increase-of-replication-factor-on-an-existing-topic", 
            "text": "Follow: http://kafka.apache.org/documentation.html#basic_ops_increase_replication_factor\nIn our case, that would be for example:  export ZK= --zookeeper zk01,zk02,zk03:2181/kafka \n/opt/kafka/bin/kafka-topics.sh $ZK --describe\ncat /mnt/increase-replication-factor.json\n{ version :1, partitions :[\n{ topic : my_topic , partition :0, replicas :[2,3,7]}\n]}\n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/increase-replication-factor.json --execute\n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/increase-replication-factor.json --verify", 
            "title": "Increase of replication factor on an existing topic"
        }, 
        {
            "location": "/kafka/#change-the-preferred-replica-of-a-partition", 
            "text": "cat /mnt/change-replicas.json\n{ version :1, partitions :[\n{ topic : my_topic , partition :3, replicas :[4,1,7]}\n]}\nexport ZK= --zookeeper zk01,zk02,zk03:2181/kafka \n/opt/kafka/bin/kafka-reassign-partitions.sh $ZK --reassignment-json-file /mnt/change-replicas.json --execute\n/opt/kafka/bin/kafka-preferred-replica-election.sh $ZK", 
            "title": "Change the \"Preferred Replica\" of a partition"
        }, 
        {
            "location": "/kafka/#change-the-retention-period-of-a-topic", 
            "text": "/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic my_topic --config retention.ms=43200000\n/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic my_topic --deleteConfig retention.ms", 
            "title": "Change the retention period of a topic"
        }, 
        {
            "location": "/kafka/#add-more-partitions-to-a-topic", 
            "text": "/opt/kafka/bin/kafka-topics.sh $ZK --alter --topic rollup_event --partitions 12  Adding partitions invole a rebalancing of the topic", 
            "title": "Add more partitions to a topic"
        }, 
        {
            "location": "/kickstarts/", 
            "text": "# Very minimal OS\n%packages --nobase\n@core\n\n%post\n/sbin/chkconfig smartd off\necho \nRUN_FIRSTBOOT=NO\n \n /etc/sysconfig/firstboot\n\ncp -p /boot/grub/grub.conf /boot/grub/grub.conf.orig\ned /boot/grub/grub.conf \nEOF\ng!hiddenmenu!s!!#hiddenmenu!gp\nwq\nEOF\n\ninitfile=/etc/inittab\ncp -f $initfile $initfile.orig\nsed -i 's/^id:5:/id:3:/g' $initfile", 
            "title": "Kickstarts"
        }, 
        {
            "location": "/labenv/", 
            "text": "Install dependencies\n\n\napt-get install virt-manager libvirt-bin augeas-doc gawk-doc augeas-tools qemu-kvm qemu radvd python-gnome2-doc python-pyorbit-dbg debootstrap\napt-get install bind9 tftpd dhcp3-server apache2\nupdate-rc.d -f dhcp3-server remove\nupdate-rc.d -f bind9 remove\n\n\n\nvi /etc/dhcp/dhcpd.conf service isc-dhcp-server restart\n\n\nGet old configuration\n\n\ncat /media/ju/bowser/backup/toad/etc/hosts >> /etc/hosts rsync /media/ju/bowser/backup/toad/etc/bind/\nlabo.fr\n /etc/bind/", 
            "title": "Labenv"
        }, 
        {
            "location": "/labenv/#install-dependencies", 
            "text": "apt-get install virt-manager libvirt-bin augeas-doc gawk-doc augeas-tools qemu-kvm qemu radvd python-gnome2-doc python-pyorbit-dbg debootstrap\napt-get install bind9 tftpd dhcp3-server apache2\nupdate-rc.d -f dhcp3-server remove\nupdate-rc.d -f bind9 remove  vi /etc/dhcp/dhcpd.conf service isc-dhcp-server restart", 
            "title": "Install dependencies"
        }, 
        {
            "location": "/labenv/#get-old-configuration", 
            "text": "cat /media/ju/bowser/backup/toad/etc/hosts >> /etc/hosts rsync /media/ju/bowser/backup/toad/etc/bind/ labo.fr  /etc/bind/", 
            "title": "Get old configuration"
        }, 
        {
            "location": "/ldapsearch/", 
            "text": "for u in `ldapsearch -LLL -D \"cn=Svc Linux\n    bind,ou=systems,dc=it,dc=vallourec,dc=net\" -w\n    480a1c28004510ec1c3dc07e2e6c6378 -h ldap.it.vallourec.net -b\n    \"cn=N3Linux,ou=groups,dc=it,dc=vallourec,dc=net\" -s sub \"*\" | awk\n    '/memberUid/ {print $2}'`;do ldapsearch -LLL -D \"cn=Svc Linux\n    bind,ou=systems,dc=it,dc=vallourec,dc=net\" -w\n    480a1c28004510ec1c3dc07e2e6c6378 -h ldap.it.vallourec.net -b\n    \"ou=people,dc=it,dc=vallourec,dc=net\" \"(uid=$u)\"| egrep \"cn:|mail\"; echo ;\n    done\n\n\n\nFind all uids from a group.\n\n\nldapsearch -LLL -D \"cn=binduser,ou=systems,dc=lab,dc=domain,dc=local\" \\\n    -w \"password\" -h ldap.domain.local \\\n    -b \"cn=thegroup,ou=groups,dc=lab,dc=domain,dc=local\" \\\n    -s sub \"'memberUid=*\"\n\n\n\nGet a specific user.\n\n\nldapsearch -LLL -D \"cn=binduser,ou=systems,dc=lab,dc=domain,dc=local\" \\\n    -w \"password\" -h ldap.domain.local \\\n    -b \"ou=perople,dc=it,dc=vallourec,dc=net\"\n    \"(uid=my.user)\"\n\n\n\nList all users.\n\n\nldapsearch -LLL -D \"cn=binduser,ou=systems,dc=lab,dc=domain,dc=local\" \\\n    -w \"password\" -h ldap.domain.local \\\n    -b \"ou=perople,dc=it,dc=vallourec,dc=net\"\n    \"(objectclass=*)\"", 
            "title": "Ldapsearch"
        }, 
        {
            "location": "/limit_bandwith/", 
            "text": "http://www.cyberciti.biz/faq/linux-traffic-shaping-using-tc-to-control-http-traffic\n\n\nCreate traffic shaping with tc and iptables\n\n\n# Delete existing rules\ntc qdisc del dev eth0 root\n\n# Queuing discipline\ntc qdisc add dev eth0 root handle 1:0 htb default 10\n\n# Create a class with bandwidth limitation\ntc class add dev eth0 parent 1:0 classid 1:10 htb rate 512kbps ceil 640kbps prio 0\n\n\n# Mark all packages for http request\niptables -A OUTPUT -t mangle -p tcp --sport 80 -j MARK --set-mark 10\nservice iptables save\n\n# Assign packages marked to the right class\ntc filter add dev eth0 parent 1:0 prio 0 protocol ip handle 10 fw flowid 1:10\n\n\n\n\nLimit the bandwith in scp\n\n\n# SCP with 128Kbits/s bandwith\nscp -l 128 source.file user@target", 
            "title": "Limit bandwith"
        }, 
        {
            "location": "/limit_bandwith/#create-traffic-shaping-with-tc-and-iptables", 
            "text": "# Delete existing rules\ntc qdisc del dev eth0 root\n\n# Queuing discipline\ntc qdisc add dev eth0 root handle 1:0 htb default 10\n\n# Create a class with bandwidth limitation\ntc class add dev eth0 parent 1:0 classid 1:10 htb rate 512kbps ceil 640kbps prio 0\n\n\n# Mark all packages for http request\niptables -A OUTPUT -t mangle -p tcp --sport 80 -j MARK --set-mark 10\nservice iptables save\n\n# Assign packages marked to the right class\ntc filter add dev eth0 parent 1:0 prio 0 protocol ip handle 10 fw flowid 1:10", 
            "title": "Create traffic shaping with tc and iptables"
        }, 
        {
            "location": "/limit_bandwith/#limit-the-bandwith-in-scp", 
            "text": "# SCP with 128Kbits/s bandwith\nscp -l 128 source.file user@target", 
            "title": "Limit the bandwith in scp"
        }, 
        {
            "location": "/linux_perf/", 
            "text": "RAM\n\n\nCPU\n\n\n\n\n\n\nrunq = number of process waiting CPU time\n\n\n\n\n\n\ncswitch (context switch) = change of process = parallel calculations\n\n\n\n\n\n\nsystem load\n\n\n\n\n\n\nload average : 1min 5min 15min (over the last Xmin)\n\n\n\n\n\n\ntraffic analogy : X single processor(s) = X bridge(s) of traffic\n\n\n\n\n\n\nload (i.e a single processor)\n\n\n\n\n\n\n0 = no traffic\n\n\n\n\n\n\n0,70 = begin to check if there is something wrong\n\n\n\n\n\n\n1 = full traffic without \"contention\"\n\n\n\n\n\n\n> 1 = full traffic + waiting processes\n\n\n\n\n\n\n3 = 3x the full traffic capacity\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCommands \n tools\n\n\nGANGLIA\n\n\n\n\n\n\nCPU graph\n\n\n\n\n\n\nUser / System CPU : utilisation du CPU user/applicatif et system\n\n\n\n\n\n\nNice CPU : %CPU time occup\u00e9 par des process \u00e0 faible prio\n\n\n\n\n\n\nWAIT CPU : %tps pass\u00e9 par le CPU \u00e0 attendre des remont\u00e9es d\u2019IO disques (= CPU wio)\n\n\n\n\nIdle CPU : %tps CPU \u00e0 glander\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVMSTAT\n\n\n\n\n\n\nR : running queue\n\n\n\n\n\n\nB : blocked (wait io - wio | blocked)\n\n\n\n\n\n\nIN : Number of interrupts\n\n\n\n\n\n\nCS : Number of context switchs\n\n\n\n\n\n\nUS : %CPU time sur User Thread\n\n\n\n\n\n\nSYS : %CPU time sur Kernel + Interrupts\n\n\n\n\n\n\nWA : %CPU idle \u00e0 case d\u2019un wait IO\n\n\n\n\n\n\nID : %CPU time compl\u00e9tement idle\n\n\n\n\n\n\nBI : IO Write\n\n\n\n\n\n\nBO : IO Read\n\n\n\n\n\n\nSI : swap in = vers la RAM\n\n\n\n\n\n\nSO : swap out = vers le disque\n\n\n\n\n\n\nSAR\n\n\nsar -q (queue length, task list length + load avg)\n\n\n\n\ntag : perf, audit, troubleshooting", 
            "title": "Linux perf"
        }, 
        {
            "location": "/linux_perf/#ram", 
            "text": "", 
            "title": "RAM"
        }, 
        {
            "location": "/linux_perf/#cpu", 
            "text": "runq = number of process waiting CPU time    cswitch (context switch) = change of process = parallel calculations    system load    load average : 1min 5min 15min (over the last Xmin)    traffic analogy : X single processor(s) = X bridge(s) of traffic    load (i.e a single processor)    0 = no traffic    0,70 = begin to check if there is something wrong    1 = full traffic without \"contention\"    > 1 = full traffic + waiting processes    3 = 3x the full traffic capacity", 
            "title": "CPU"
        }, 
        {
            "location": "/linux_perf/#commands-tools", 
            "text": "", 
            "title": "Commands &amp; tools"
        }, 
        {
            "location": "/linux_perf/#ganglia", 
            "text": "CPU graph    User / System CPU : utilisation du CPU user/applicatif et system    Nice CPU : %CPU time occup\u00e9 par des process \u00e0 faible prio    WAIT CPU : %tps pass\u00e9 par le CPU \u00e0 attendre des remont\u00e9es d\u2019IO disques (= CPU wio)   Idle CPU : %tps CPU \u00e0 glander", 
            "title": "GANGLIA"
        }, 
        {
            "location": "/linux_perf/#vmstat", 
            "text": "R : running queue    B : blocked (wait io - wio | blocked)    IN : Number of interrupts    CS : Number of context switchs    US : %CPU time sur User Thread    SYS : %CPU time sur Kernel + Interrupts    WA : %CPU idle \u00e0 case d\u2019un wait IO    ID : %CPU time compl\u00e9tement idle    BI : IO Write    BO : IO Read    SI : swap in = vers la RAM    SO : swap out = vers le disque", 
            "title": "VMSTAT"
        }, 
        {
            "location": "/linux_perf/#sar", 
            "text": "sar -q (queue length, task list length + load avg)  tag : perf, audit, troubleshooting", 
            "title": "SAR"
        }, 
        {
            "location": "/logstash/", 
            "text": "Puppet\n\n\nBased on modules from Elasticsearch\n\n\nclass { 'tm_java':\n  version     =\n '7',\n  use_openjdk =\n true,\n} -\n\nclass { 'elasticsearch':\n  manage_repo  =\n true,\n  version      =\n '1.3.4',\n  repo_version =\n '1.3',\n}\nclass { 'logstash':\n  version      =\n '1.4.2-1-2c0f5a1',\n  manage_repo  =\n true,\n  repo_version =\n '1.4',\n}", 
            "title": "Logstash"
        }, 
        {
            "location": "/logstash/#puppet", 
            "text": "Based on modules from Elasticsearch  class { 'tm_java':\n  version     =  '7',\n  use_openjdk =  true,\n} - \nclass { 'elasticsearch':\n  manage_repo  =  true,\n  version      =  '1.3.4',\n  repo_version =  '1.3',\n}\nclass { 'logstash':\n  version      =  '1.4.2-1-2c0f5a1',\n  manage_repo  =  true,\n  repo_version =  '1.4',\n}", 
            "title": "Puppet"
        }, 
        {
            "location": "/lv_to_dm/", 
            "text": "lvdisplay | awk '/LV Name/{n=$3}/Block device/{d=$3; sub(\n.*:\n,\ndm-\n,d); print d,n;}'", 
            "title": "Lv to dm"
        }, 
        {
            "location": "/lvm/", 
            "text": "Resources.\n\n\nhttp://tldp.org/HOWTO/LVM-HOWTO/index.html\n\n\n\n\nAdd pvmove example\n\n\n\n\nUsage\n\n\nCreate PV.\n\n\npvcreate /dev/sda\n\n\n\n\nCreate VG.\n\n\nvgcreate vgdev /dev/sdd2\n\n\n\n\nExtend VG.\n\n\nfdisk # choose the device or create partition\npvcreate /dev/sdd1\nvgextend vgos /dev/sdd1\n\n\n\n\nExtend LV.\n\n\nvgdisplay # check Free PE / Size\nlvextend -L+10G /dev/vgos/optlv\nresize2fs /dev/mapper/vgos-optlv\n\n\n\n\nReduce LV.\n\n\n# Exemple 30GB -\n 25GB\numount /opt\ne2fsck -f /dev/mapper/vgos-optlv\nresize2fs /dev/mapper/vgos-optlv 25G\nlvreduce -L-5G /dev/vgos/optlv\nmount /opt\n\n\n\n\nReduce VG.\n\n\n# Check if we have enough place for for all lv\nlvdisplay\nvgdisplay\n# Reducve LV is necessary \n reduce vg\nvgreduce vgos /dev/sdd1\n\n\n\n\nSnapshot \n Backups.\n\n\nlvcreate -L10G -s -n backups /dev/vgos/optlv\nmkdir /mnt/backups\nmount /dev/vgos/backups/mnt/backups\n\n\n\n\nRemove LV.\n\n\numount /mnt/backups\nlvremove /dev/vgos/backups\n\n\n\n\nRemove an unused disk.\n\n\nvgreduce vgos /dev/sdd\npvremove /dev/sdd\n\n\n\n\nRestore PV.\n\n\npvdisplay\npvcreate --uuid=HptAZH-bqh1-8qc5-E0wT-bn5h-5YCw-vyK6sV /dev/sdd \\\n--restorefile /etc/lvm/archive/vgos_00008-84526315.vg\n\n\n\n\nGet informations\n\n\n# Display logical devices using device-mapper\ndmsetup info\ndmsetup ls\n\n\n\n\nTips\n\n\n# Get the LV repartition\nlvm -a -o +devices", 
            "title": "Lvm"
        }, 
        {
            "location": "/lvm/#usage", 
            "text": "Create PV.  pvcreate /dev/sda  Create VG.  vgcreate vgdev /dev/sdd2  Extend VG.  fdisk # choose the device or create partition\npvcreate /dev/sdd1\nvgextend vgos /dev/sdd1  Extend LV.  vgdisplay # check Free PE / Size\nlvextend -L+10G /dev/vgos/optlv\nresize2fs /dev/mapper/vgos-optlv  Reduce LV.  # Exemple 30GB -  25GB\numount /opt\ne2fsck -f /dev/mapper/vgos-optlv\nresize2fs /dev/mapper/vgos-optlv 25G\nlvreduce -L-5G /dev/vgos/optlv\nmount /opt  Reduce VG.  # Check if we have enough place for for all lv\nlvdisplay\nvgdisplay\n# Reducve LV is necessary   reduce vg\nvgreduce vgos /dev/sdd1  Snapshot   Backups.  lvcreate -L10G -s -n backups /dev/vgos/optlv\nmkdir /mnt/backups\nmount /dev/vgos/backups/mnt/backups  Remove LV.  umount /mnt/backups\nlvremove /dev/vgos/backups  Remove an unused disk.  vgreduce vgos /dev/sdd\npvremove /dev/sdd  Restore PV.  pvdisplay\npvcreate --uuid=HptAZH-bqh1-8qc5-E0wT-bn5h-5YCw-vyK6sV /dev/sdd \\\n--restorefile /etc/lvm/archive/vgos_00008-84526315.vg", 
            "title": "Usage"
        }, 
        {
            "location": "/lvm/#get-informations", 
            "text": "# Display logical devices using device-mapper\ndmsetup info\ndmsetup ls", 
            "title": "Get informations"
        }, 
        {
            "location": "/lvm/#tips", 
            "text": "# Get the LV repartition\nlvm -a -o +devices", 
            "title": "Tips"
        }, 
        {
            "location": "/lvm_filter_mpath/", 
            "text": "filter = [ \nr/sd.*/\n, \na/mpath/.*\n ]", 
            "title": "Lvm filter mpath"
        }, 
        {
            "location": "/lvm_move_vg/", 
            "text": "Source host\n\n\numount /opt/data\n# disable the VG that you want to move\nvgchange -an datavg\n# export it in order to prevent usage or modification\nvgexport datavg\n\n\n\n\nThen : unplug the storage device and plug it to the destination host.\n\n\nDestination host\n\n\n# find PVs\npvscan\n# import the VG configuration\nvgimport datavg\n# activate the VG\nvgchange -ay datavg\n# use it\nmount /dev/datavg/data /opt/data", 
            "title": "Lvm move vg"
        }, 
        {
            "location": "/lvm_move_vg/#source-host", 
            "text": "umount /opt/data\n# disable the VG that you want to move\nvgchange -an datavg\n# export it in order to prevent usage or modification\nvgexport datavg  Then : unplug the storage device and plug it to the destination host.", 
            "title": "Source host"
        }, 
        {
            "location": "/lvm_move_vg/#destination-host", 
            "text": "# find PVs\npvscan\n# import the VG configuration\nvgimport datavg\n# activate the VG\nvgchange -ay datavg\n# use it\nmount /dev/datavg/data /opt/data", 
            "title": "Destination host"
        }, 
        {
            "location": "/manpage_asciidoc/", 
            "text": "Build the man.\n\n\na2x -v --doctype manpage --format manpage manpage.txt\n\n\n\nRead the man.\n\n\nman -l applicationname.1\n\n\n\nMan example.\n\n\nraskiidoc(1) ============ :doctype: manpage NAME \\---- raskiidoc - rakefile for asciidoc SYNOPSIS \\-------- *raskiidoc* ['-hdo'] ['-f filename'] ['-t type'] DESCRIPTION \\----------- *raskiidoc* Rakefile to simplify generation of asciidoc documents. Asciidoc generation can use complex arguments hard to remember, and could be document specific. This rakefile (and parameters files) is an attempt to identify options to use during generation. OPTIONS \\------- Options must come before the other command line arguments. *-h*:: Show some help. *-f filename*:: Build only the specified file. *-o*:: Force rebuild. *-d*:: Debug mode. *-t*:: Type to build. One of [pdf|html|slidy|slidy2|deckjs]. SEE ALSO \\-------- https://github.com/llicour/raskiidoc AUTHOR \\------ Laurent Licour (https://github.com/llicour) DATE \\---- 2013-09-30", 
            "title": "Manpage asciidoc"
        }, 
        {
            "location": "/memory_tuning/", 
            "text": "free -m\n# Most of the memory used if for buffers and cache since\n# Linux always tries to use RAM to speed up disk operations\n\n# Page Cache size\ngetconf PAGE_SIZE\n\n\n\n\nTLB : Translation Lookaside Buffers\n\n\nPage Cache\n\n\nPage Cache content data of files and executable programs and is used to reduce the number of disk reads.\n\n\nvm.min_free_kbytes = 23005\n# Page reclaim thresholds\n# If too high =\n swap\n# If too low =\n contention\n\nswappiness = [0-100]\n# Balance to swapping out\n\nnr_pdflush_theads\n# nb thread to flush Page Cache\n# control by dirty params\n\ndirty_writeback_centisecs = 500\n# How often pdflush wakes up to write data to disk\n# Not make sense to set less than 100\n# May be benefcial to decrease it on systems with lots of memory and active\n# writing processes\n\ndirty_expire_centisecs = 3000\n# How long data can be in the Page Cache\n# Good to set lower but now too low =\n I/O congestion\n\ndirty_background_ratio = 10\n\ndirty_ratio = 40\n\n\n\n\nSwap space\n\n\nFor Oracle 10G, if RAM > 4GB then SWAP = 4GB\n\n\nHugePages\n\n\nvm.nr_hugepages = 2048\n# Nb of allocated pages.\n# HugePages size = Hugepagesize (/proc/meminfo) * vm.nr_hugepages\n\nvm.hugetlb_shm_group\n# Define groups wich can use HugePages system\n\nkernel.shmmax\n# Max size of shared memory segment\n# Has to be \n SGA size\n\nkernel.shmall\n# Max amount of shared memory that can be allocated\n# Has to be \n total SGAs size. /!\\ 1MB = 1024KB\n\nmemlock\n# Max amount of memory that can be allocated by 1 user\n\n\n\n\nSizing HugePages\n\n\nThe size of the HugePages depends of what you need to put in preallocated pages. In Oracle context, HugePages size >= SGA size.\n\n\nHow to know if HugePages are used ?\n\n\ngrep Huge /proc/meminfo\n# or\nipcs -m", 
            "title": "Memory tuning"
        }, 
        {
            "location": "/memory_tuning/#page-cache", 
            "text": "Page Cache content data of files and executable programs and is used to reduce the number of disk reads.  vm.min_free_kbytes = 23005\n# Page reclaim thresholds\n# If too high =  swap\n# If too low =  contention\n\nswappiness = [0-100]\n# Balance to swapping out\n\nnr_pdflush_theads\n# nb thread to flush Page Cache\n# control by dirty params\n\ndirty_writeback_centisecs = 500\n# How often pdflush wakes up to write data to disk\n# Not make sense to set less than 100\n# May be benefcial to decrease it on systems with lots of memory and active\n# writing processes\n\ndirty_expire_centisecs = 3000\n# How long data can be in the Page Cache\n# Good to set lower but now too low =  I/O congestion\n\ndirty_background_ratio = 10\n\ndirty_ratio = 40", 
            "title": "Page Cache"
        }, 
        {
            "location": "/memory_tuning/#swap-space", 
            "text": "For Oracle 10G, if RAM > 4GB then SWAP = 4GB", 
            "title": "Swap space"
        }, 
        {
            "location": "/memory_tuning/#hugepages", 
            "text": "vm.nr_hugepages = 2048\n# Nb of allocated pages.\n# HugePages size = Hugepagesize (/proc/meminfo) * vm.nr_hugepages\n\nvm.hugetlb_shm_group\n# Define groups wich can use HugePages system\n\nkernel.shmmax\n# Max size of shared memory segment\n# Has to be   SGA size\n\nkernel.shmall\n# Max amount of shared memory that can be allocated\n# Has to be   total SGAs size. /!\\ 1MB = 1024KB\n\nmemlock\n# Max amount of memory that can be allocated by 1 user", 
            "title": "HugePages"
        }, 
        {
            "location": "/memory_tuning/#sizing-hugepages", 
            "text": "The size of the HugePages depends of what you need to put in preallocated pages. In Oracle context, HugePages size >= SGA size.", 
            "title": "Sizing HugePages"
        }, 
        {
            "location": "/memory_tuning/#how-to-know-if-hugepages-are-used", 
            "text": "grep Huge /proc/meminfo\n# or\nipcs -m", 
            "title": "How to know if HugePages are used ?"
        }, 
        {
            "location": "/misc_problems/", 
            "text": "Connection closed by IP\n\n\nProblem.\n\n\n# /var/log/secure\nfatal: Access denied for user jenkins by PAM account configuration local user\n\n\n\nSolution.\n\n\ngrep -v '^#' /etc/security/access.conf | tr -s '\\n'\n+ : @hostname : ALL\n+ : root : ALL\n+ : yourusername : ALL\n- : ALL : ALL", 
            "title": "Misc problems"
        }, 
        {
            "location": "/misc_problems/#connection-closed-by-ip", 
            "text": "Problem.  # /var/log/secure\nfatal: Access denied for user jenkins by PAM account configuration local user  Solution.  grep -v '^#' /etc/security/access.conf | tr -s '\\n'\n+ : @hostname : ALL\n+ : root : ALL\n+ : yourusername : ALL\n- : ALL : ALL", 
            "title": "Connection closed by IP"
        }, 
        {
            "location": "/misc_ubuntu/", 
            "text": "Misc configuration\n\n\n# Gtk-WARNING **: Unable to locate theme engine in module_path: \u201cpixmap\u201d\nsudo apt-get install gtk2-engines-pixbuf", 
            "title": "Misc ubuntu"
        }, 
        {
            "location": "/misc_ubuntu/#misc-configuration", 
            "text": "# Gtk-WARNING **: Unable to locate theme engine in module_path: \u201cpixmap\u201d\nsudo apt-get install gtk2-engines-pixbuf", 
            "title": "Misc configuration"
        }, 
        {
            "location": "/mysql/", 
            "text": "Create a user and grant him.\n\n\ncreate user 'itop'@'localhost' identified by 'itop';\ncreate dabatase itopdb;\ngrant all privileges on itopdb.* to 'itop'@'localhost' with grant option;\n\n\n\nGet databases sizes.\n\n\nmysql -uroot -p --socket=/var/lib/mysql/mysql.sock \nEOF\nuse information_schame;\nselect tables_schema, SUM(data_length + index_length) / 1024 / 1024\nfrom TABLES\ngroup by table_schema;\nEOF", 
            "title": "Mysql"
        }, 
        {
            "location": "/network_sniffer/", 
            "text": "Capture network\n\n\ntethereal -i eth0 -f 'tcp port 22' -w /tmp/capture_ssh.cap\n\n\n\n\nRead capture\n\n\n# Read ascii\ntcpdump -A -r /tmp/capture_ssh.cap\n\n# Read hex \n ascii\ntcpdump -XX -r /tmp/capture_ssh.cap", 
            "title": "Network sniffer"
        }, 
        {
            "location": "/network_sniffer/#capture-network", 
            "text": "tethereal -i eth0 -f 'tcp port 22' -w /tmp/capture_ssh.cap", 
            "title": "Capture network"
        }, 
        {
            "location": "/network_sniffer/#read-capture", 
            "text": "# Read ascii\ntcpdump -A -r /tmp/capture_ssh.cap\n\n# Read hex   ascii\ntcpdump -XX -r /tmp/capture_ssh.cap", 
            "title": "Read capture"
        }, 
        {
            "location": "/nfs/", 
            "text": "Install dependencies\n\n\nyum groupinstall nfs-file-server\n\n\n\n\nConfiguration\n\n\nvim /etc/export\n# i.e\n# /var/ftp/pub  192.168.0.0/24(ro,sync)\n# /var/www/html *.labo.fr(rw,sync)\n\n\n\n\nApply new exports\n\n\nexportfs -rv", 
            "title": "Nfs"
        }, 
        {
            "location": "/nfs/#install-dependencies", 
            "text": "yum groupinstall nfs-file-server", 
            "title": "Install dependencies"
        }, 
        {
            "location": "/nfs/#configuration", 
            "text": "vim /etc/export\n# i.e\n# /var/ftp/pub  192.168.0.0/24(ro,sync)\n# /var/www/html *.labo.fr(rw,sync)", 
            "title": "Configuration"
        }, 
        {
            "location": "/nfs/#apply-new-exports", 
            "text": "exportfs -rv", 
            "title": "Apply new exports"
        }, 
        {
            "location": "/nfs_perf/", 
            "text": "source : \nhttp://nfs.sourceforge.net/nfs-howto/ar01s05.html\n\n\ngrep MAXBLKSIZE /usr/include/linux/nfsd/const.h\n# 32*1024 = 32768\nmount -t nfs srv:/opt/share /mnt/nfs_share \\\n-o rw,intr,rsize=32768,wsize=32768", 
            "title": "Nfs perf"
        }, 
        {
            "location": "/nginx/", 
            "text": "Server example with php-fpm.\n\n\nserver {\n        server_name sanfrancisco.pryz.fr;\n\n        access_log   /var/log/nginx/sf.pryz.access.log;\n        error_log    /var/log/nginx/sf.pryz.error.log;\n\n        root /usr/share/nginx/wordpress;\n        index index.php;\n\n        location / {\n                try_files $uri $uri/ /index.php?$args;\n        }\n\n        location ~ \\.php$ {\n                try_files $uri =404;\n                include fastcgi_params;\n                fastcgi_pass unix:/var/run/php5-fpm.sock;\n        }\n}\n\n\n\nTest Nginx conf.\n\n\nnginx -t", 
            "title": "Nginx"
        }, 
        {
            "location": "/oracle/", 
            "text": "# connect as sysdba\nsqlplus / as sysdba\n\n# connect with tns\nsqlplus 'user@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=dbhostname)\\\n(Port=1521))(CONNECT_DATA=(SID=dbsid)))\n\n\n\n\n# get instance informations\nselect * from v$instance;\n\n# get all registered username\nselect username from dba_users;", 
            "title": "Oracle"
        }, 
        {
            "location": "/pgql/", 
            "text": "# Restart a connection to dbname database\n\\d dbname\n\n# List all databases\n\\l\n\n# List all tables\n\\dp\n\n# Describe a table\n\\d+ tablename", 
            "title": "Pgql"
        }, 
        {
            "location": "/postgresql_perf/", 
            "text": "Table : pg_stat_user_tables\n\n\n\n\n\n\nheap_blks_read : Number of disk blocks read from this table\n\n\n\n\n\n\nheap_blks_hit : Number of buffer hits in this table\n\n\n\n\n\n\nratio : cache hit rate. Need to be about 99%. If not increase the cache size\n\n\n\n\n\n\nrtsdb=# SELECT sum(heap_blks_read) as heap_read, sum(heap_blks_hit) as heap_hit, sum(heap_blks_hit)/(sum(heap_blks_hit)\nsum(heap_blks_read)) as ratio FROM pg_statio_user_tables;\n heap_read |  heap_hit  |         ratio\n-----------\n------------+------------------------ 5222966 | 3705936846 | 0.99859263242097212062 (1 row)\n\n\nrtsdb=# SELECT relname, 100*idx_scan/(seq_scan+idx_scan) percent_of_times_index_used, n_live_tup rows_in_table FROM pg_stat_user_tables WHERE seq_scan + idx_scan > 0 ORDER BY n_live_tup DESC; relname | percent_of_times_index_used | rows_in_table ------------------------\n-----------------------------\n--------------- baselinecontent | 99 | 441853 version | 99 | 259329 ruleartifact | 99 | 199570 ruleartifactsibling | 99 | 199570 rplftrgt | 99 | 117748 definition | 99 | 115853 bompathentry | 94 | 43724 brstudio | 88 | 43075 ruleprojecttag | 88 | 41477", 
            "title": "Postgresql perf"
        }, 
        {
            "location": "/puppet_issues/", 
            "text": "Error like.\n\n\nerr: Could not retrieve catalog from remote server: Error 400 on SERVER:\n$concat_basedir not defined. Try running again with pluginsync enabled ...\n\n\n\nTo resolv :\n\n\npuppet agent --test --debug --plugsync", 
            "title": "Puppet issues"
        }, 
        {
            "location": "/pxe/", 
            "text": "Installation\n\n\n# Install dependencies\nyum install tftp-server syslinux\n\n# Active tftp with xinetd\nsed -i 's/disable\\s=\\sno/disable\\s=\\syes' /etc/xinetd.d/tftp\nservice xinetd restart\n\n# Build the tftpboot\ncp /usr/lib/syslinux/{pxelinux.0,menu.c32,} /tftpboot/\nmkdir /tftpboot/pxelinux.cfg\n\n# Copy system components\nmkdir -p /tftpboot/images/rhel5u8-x86_64\ncp /mnt/cdrom/isolinux/initrd.img /mnt/cdrom/isolinux/vmlinuz /tftpboot/images/rhel5u8-x86_64\n\n# Setup the DHCPD to load the pxelinux.0 file\ncat \n /etc/dhcpd.conf \n EOF\nsubnet 192.168.123.0 netmask 255.255.255.0 {\n    range 192.168.123.100 192.168.123.200;\n    filename \npxelinux.0\n;\n    option routers 192.168.123.42;\n    next-server 192.168.123.42;\n}\nEOF\n\n# Create the PXE default menu\ncat \n /tftpboot/pxelinux.cfg/default \n EOF\ndefault menu.c32\nprompt 0\ntimeout 300\n#default centos6\n\nmenu title pxe menu\n\nlabel centos6\n    menu label centos6\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-rhel6.cfg\n\nlabel lab\n    menu label lab\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-el6-lab.cfg\n\nlabel infra\n    menu label infra\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-el6-infra.cfg\n\nEOF\n\n\n\n\nTroubleshooting\n\n\n\n\n\n\nMessage like \"DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 10\" in tty3\n\n\n\n\nInvestigate for a network problem (switch port configuration, firewalling, \u2026)", 
            "title": "Pxe"
        }, 
        {
            "location": "/pxe/#installation", 
            "text": "# Install dependencies\nyum install tftp-server syslinux\n\n# Active tftp with xinetd\nsed -i 's/disable\\s=\\sno/disable\\s=\\syes' /etc/xinetd.d/tftp\nservice xinetd restart\n\n# Build the tftpboot\ncp /usr/lib/syslinux/{pxelinux.0,menu.c32,} /tftpboot/\nmkdir /tftpboot/pxelinux.cfg\n\n# Copy system components\nmkdir -p /tftpboot/images/rhel5u8-x86_64\ncp /mnt/cdrom/isolinux/initrd.img /mnt/cdrom/isolinux/vmlinuz /tftpboot/images/rhel5u8-x86_64\n\n# Setup the DHCPD to load the pxelinux.0 file\ncat   /etc/dhcpd.conf   EOF\nsubnet 192.168.123.0 netmask 255.255.255.0 {\n    range 192.168.123.100 192.168.123.200;\n    filename  pxelinux.0 ;\n    option routers 192.168.123.42;\n    next-server 192.168.123.42;\n}\nEOF\n\n# Create the PXE default menu\ncat   /tftpboot/pxelinux.cfg/default   EOF\ndefault menu.c32\nprompt 0\ntimeout 300\n#default centos6\n\nmenu title pxe menu\n\nlabel centos6\n    menu label centos6\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-rhel6.cfg\n\nlabel lab\n    menu label lab\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-el6-lab.cfg\n\nlabel infra\n    menu label infra\n    kernel images/pxeboot/vmlinuz\n    append initrd=images/pxeboot/initrd.img ks=http://192.168.123.42/ks/ks-el6-infra.cfg\n\nEOF", 
            "title": "Installation"
        }, 
        {
            "location": "/pxe/#troubleshooting", 
            "text": "Message like \"DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 10\" in tty3   Investigate for a network problem (switch port configuration, firewalling, \u2026)", 
            "title": "Troubleshooting"
        }, 
        {
            "location": "/python_simplehttp/", 
            "text": "python -m SimpleHTTPServer 8080\n\n\n\n\nCreate a simple http server in the current directory.", 
            "title": "Python simplehttp"
        }, 
        {
            "location": "/raid/", 
            "text": "Table of write penalties\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRAID type\n\n\nWrite penalty\n\n\n\n\n\n\n\n\n\n\nRAID0\n\n\n2\n\n\n\n\n\n\nRAID1\n\n\n4\n\n\n\n\n\n\nRAID10\n\n\n10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n\n\n2\n\n\nA\n\n\n\n\n\n\n3\n\n\n4\n\n\nB\n\n\n\n\n\n\n5\n\n\n6\n\n\nC\n\n\n\n\n\n\n\n\n\n| t | toto\u00a0| | tototo | toto\u00a0|", 
            "title": "Raid"
        }, 
        {
            "location": "/raid_lvm_kickstart/", 
            "text": "part raid.00 --size=100 --ondisk=sda\npart raid.01 --size=100 --ondisk=sdb\n\npart raid.02 --size=0 --grow --ondisk=sda\npart raid.03 --size=0 --grow --ondisk=sdb\n\npart /boot --level=1 --device=md0 raid.00 raid.01\nraid pv.0 --level=1 --device=md1 --fstype \nphysical volume (LVM)\n raid.02\nraid.03\n\nvolgroup vg00 --size=7000 pv.0\nlogvol swap --fstype swap --size=512 --name=swap --vgname=vg00\nlogvol / --fstype ext3 --size=2000 --name=rootlv --vgname=vg00\nlogvol /usr --fstype ext3 --size=1000 --name=usrlv --vgname=vg00\nlogvol /var --fstype ext3 --size=512 --name=varlv --vgname=vg00\nlogvol /tmp --fstype ext3 --size=512 --name=tmplv --vgname=vg00\nlogvol /opt --fstype ext3 --size=1000 --name=optlv --vgname=vg00", 
            "title": "Raid lvm kickstart"
        }, 
        {
            "location": "/rails_4_rbenv/", 
            "text": "If you have installed rails with \"sudo gem install rails\", uninstall it ! Same thing for bundler and apt-get installation.\n\n\nrbenv install 2.0.0-p247\nruby global 2.0.0-p247\ngem install bundler\ngem install rake\ngem install rails", 
            "title": "Rails 4 rbenv"
        }, 
        {
            "location": "/rails_json_nested_include/", 
            "text": "Rails 3 syntax.\n\n\ndef as_json(options=nil)\n  super({\n    only: :name,\n    include: {\n      weapons: {\n        only: [:name, :ammo]\n      }\n    }\n    })\nend", 
            "title": "Rails json nested include"
        }, 
        {
            "location": "/rbenv_ubuntu/", 
            "text": "I got some issues with the apt-get version so now I install rbenv from github repositories.\n\n\nmkdir -p ~/.rbenv/plugins\ngit clone git://github.com/sstephenson/rbenv.git ~/.rbenv\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' \n ~/.profile\nmkdir 'eval \"$(rbenv init -)\"' \n ~/.profile\ncd ~/.rbenv/plugins\ngit clone git://github.com/sstephenson/ruby-build.git\n. ~/.profile\n\n\n\nGem : if you don\u2019t want to install all documentation locally.\n\n\necho \"gem: --no-ri --no-rdoc\" \n ~/.gemrc", 
            "title": "Rbenv ubuntu"
        }, 
        {
            "location": "/redis_cli/", 
            "text": "Commands.\n\n\n# List all keys\nkeys *\n\n# Get key members\nsmembers KEY\n\n# Add key member\nsadd KEY MEMBERVALUE\n\n# Set a simple variable\nset class:variable \"value\"\n\n#\u00a0Delete a variable\ndel class::variable\n\n\n\nDelete multiple variables with xargs.\n\n\nredis-cli KEYS \"common*\" | xargs redis-cli DEL", 
            "title": "Redis cli"
        }, 
        {
            "location": "/rhel_io_tuning/", 
            "text": "I/O Elevators\n\n\n\n\n\n\nCFQ (Completely Fair Queuing)\n\n\n\n\n\n\nPer process queue\n\n\n\n\n\n\nEach process queue gets fixed time slice (process priority)\n\n\n\n\n\n\nDefault algorithm for RHEL\n\n\n\n\n\n\n\n\n\n\nDeadline\n\n\n\n\n\n\nTwo queues per device, one for read and one for writes\n\n\n\n\n\n\nI/Os dispatched based on time spent in queue\n\n\n\n\n\n\nRecommended for single instance databases with dedicated storage\n\n\n\n\n\n\n\n\n\n\nNoop\n\n\n\n\n\n\nFIFO\n\n\n\n\n\n\nSimple I/O Merging\n\n\n\n\n\n\nLowest CPU Cost\n\n\n\n\n\n\nRecommended for CPU-limited env", 
            "title": "Rhel io tuning"
        }, 
        {
            "location": "/rhel_io_tuning/#io-elevators", 
            "text": "CFQ (Completely Fair Queuing)    Per process queue    Each process queue gets fixed time slice (process priority)    Default algorithm for RHEL      Deadline    Two queues per device, one for read and one for writes    I/Os dispatched based on time spent in queue    Recommended for single instance databases with dedicated storage      Noop    FIFO    Simple I/O Merging    Lowest CPU Cost    Recommended for CPU-limited env", 
            "title": "I/O Elevators"
        }, 
        {
            "location": "/rsyslog/", 
            "text": "TCP and UDP\n\n\n# Remote with UDP\n*.* @rsyslogserver.localdomain:514\n# Remote with TCP\n*.* @@rsyslogserver.localdomain:514\n\n\n\nRsyslog with TLS/SSL\n\n\nServer.\n\n\n$ModLoad imtcp\n$DefaultNetstreamDriver gtls\n$DefaultNetstreamDriverCAFile ca.pem\n$DefaultNetstreamDriverCertFile server-cert.pem\n$DefaultNetstreamDriverKeyFile server-key.pem\n$ActionSendStreamDriverAuthMode x509/name\n$ActionSendStreamDriverPermittedPeer client.localdomain\n$ActionSendStreamDriverMode 1\n$InputTCPServerRun 10514\n\n\n\nClient.\n\n\n$DefaultNetstreamDriver gtls\n$DefaultNetstreamDriverCAFile ca.pem\n$DefaultNetstreamDriverCertFile client-cert.pem\n$DefaultNetstreamDriverKeyFile client-key.pem\n$ActionSendStreamDriverAuthMode x509/name\n$ActionSendStreamDriverPermittedPeer rsyslog.localdomain\n$ActionSendStreamDriverMode 1\n*.* @@rsyslogserver.localdomain:10514\n\n\n\nTemplating\n\n\nSend to logstash instance on port 5514 using specific template\n\n\n$template logstash,\n%msg%\\n\n\nif $programname == 'haproxy' then @@logstash:5514;logstash", 
            "title": "Rsyslog"
        }, 
        {
            "location": "/rsyslog/#tcp-and-udp", 
            "text": "# Remote with UDP\n*.* @rsyslogserver.localdomain:514\n# Remote with TCP\n*.* @@rsyslogserver.localdomain:514", 
            "title": "TCP and UDP"
        }, 
        {
            "location": "/rsyslog/#rsyslog-with-tlsssl", 
            "text": "Server.  $ModLoad imtcp\n$DefaultNetstreamDriver gtls\n$DefaultNetstreamDriverCAFile ca.pem\n$DefaultNetstreamDriverCertFile server-cert.pem\n$DefaultNetstreamDriverKeyFile server-key.pem\n$ActionSendStreamDriverAuthMode x509/name\n$ActionSendStreamDriverPermittedPeer client.localdomain\n$ActionSendStreamDriverMode 1\n$InputTCPServerRun 10514  Client.  $DefaultNetstreamDriver gtls\n$DefaultNetstreamDriverCAFile ca.pem\n$DefaultNetstreamDriverCertFile client-cert.pem\n$DefaultNetstreamDriverKeyFile client-key.pem\n$ActionSendStreamDriverAuthMode x509/name\n$ActionSendStreamDriverPermittedPeer rsyslog.localdomain\n$ActionSendStreamDriverMode 1\n*.* @@rsyslogserver.localdomain:10514", 
            "title": "Rsyslog with TLS/SSL"
        }, 
        {
            "location": "/rsyslog/#templating", 
            "text": "Send to logstash instance on port 5514 using specific template  $template logstash, %msg%\\n \nif $programname == 'haproxy' then @@logstash:5514;logstash", 
            "title": "Templating"
        }, 
        {
            "location": "/ruby_load_path/", 
            "text": "ruby -e 'puts $LOAD_PATH'", 
            "title": "Ruby load path"
        }, 
        {
            "location": "/ruby_methodlogger/", 
            "text": "class MethodLogger\n  def log_method(klass, method_name)\n    klass.class_eval do\n      alias_method \n#{method_name}_original\n, method_name\n      define_method method_name do |*args, \nblock|\n        puts \n#{Time.now}: Called #{method_name}\n\n        send \n#{method_name}_original\n, *args, \nblock\n      end\n    end\n  end\nend\n\nclass Hello\n  def say_world\n    puts \nHello world\n\n  end\nend\n\n# To use it\nlogger = MethodLogger.new\nlogger.log_method(Hello, :say_world)\n\nHello.new.say_world", 
            "title": "Ruby methodlogger"
        }, 
        {
            "location": "/ruby_neo4j/", 
            "text": "http://maxdemarzi.com/2012/01/04/getting-started-with-ruby-and-neo4j/\n\n\nInstall the gem and launch neo4j\n\n\nBy default neo4j is binded on http://localhost:7474 but you can change it in\nneo4j/conf/neo4j-server.properties file.\n[source,bash]\n\n\n\ngem install neography echo \"require \nneography/tasks\n\" > Rakefile rake neo4j:install rake neo4j:start\n\n\nExample of usage\n\n\n\nrequire 'rubygems'\nrequire 'neography'\n\n@neo = Neography::Rest.new\n\nnode1 = @neo.create_node(\nname\n =\n \nnode1\n)\nnode2 = @neo.create_node(\nname\n =\n \nnode2\n)\n\n@neo.create_relationship(\nthere_is_a_relation\n, node1, node2)\n\ndef suggestions_for(node)\n  @neo.traverse(node,\n                \nnodes\n,\n                {\norder\n =\n \nbreadth first\n,\n                 \nuniqueness\n =\n \nnode global\n,\n                 \nrelationships\n =\n {\ntype\n=\n \nfriends\n,\n                                     \ndirection\n =\n \nin\n},\n                 \nreturn filter\n =\n {\nlanguage\n =\n \njavascript\n,\n                                     \nbody\n =\n \nposition.length() == 2;\n},\n                 \ndepth\n =\n 2}).map{|n| n[\ndata\n][\nname\n]}.join(', ')\nend\n\njohnathan = create_person('Johnathan')\nmark      = create_person('Mark')\nphil      = create_person('Phil')\nmary      = create_person('Mary')\nluke      = create_person('Luke')\n\nmake_mutual_friends(johnathan, mark)\nmake_mutual_friends(mark, mary)\nmake_mutual_friends(mark, phil)\nmake_mutual_friends(phil, mary)\nmake_mutual_friends(phil, luke)\n\nputs \nJohnathan should become friends with #{suggestions_for(johnathan)}", 
            "title": "Ruby neo4j"
        }, 
        {
            "location": "/samba_winbind/", 
            "text": "Install samba and winbind\n\n\nyum -y install samba-common samba-client samba-winbind\n\n\n\n\nChange authentification system\n\n\nauthconfig --enablewinbind \\\n--enablesmbauth \\\n--smbsecurity=ads \\\n--smbworkgroup=YOURWORKGROUP \\\n--smbrealm=YOURDOMAIN.NET \\\n--smbservers=dc.yourdomain.net \\\n--winbindtemplateshel=/sbin/nologin \\\n--enablewinbindusedefaultdomain \\\n--update\n\n\n\n\nJoin the domain\n\n\nnet ads join admin@YOURDOMAIN.NET\nnet ads testjoin\n\n\n\n\nCheck the authentification\n\n\nwbinfo -u\nwbinfo -g\ngetent passwd\n\n\n\n\nConfigure samba share\n\n\n# Share example (/etc/samba/smb.conf)\n [DBshare]\n   comment = Database share\n   path = /home/db/smb\n   read only = yes\n   browseable = yes\n   guest ok = no\n   valid users = @thedomain\\thegroup1,@thedomain\\thegroup2\n# if you have enabled \nwinbind use default domain\n\n   valid users = @thegroup1, @thegroup2\n\n\n\n\nRestart samba\n\n\n/etc/init.d/samba restart\n\n\n\n\nTest samba\n\n\nsmbclient -U user -L smbserver\nsmbclient -U user //srv.yourdomain.net/theshare\n\n\n\n\nTroubleshooting\n\n\n\n\nIf the Domain Controller is a Windows Server 2008 R2, you need to install samba3x\n\n\n\n\nmkdir /tmp/smb_bkp\ncp -Rf /etc/samba/* /tmp/smb_bkp\nrpm -e --nodeps samba samba-client samba-common\nyum -y install samba3x samba3x-common samba3x-client\n\n\n\n\n\n\nYou can use Windows group to set folders/files permissions", 
            "title": "Samba winbind"
        }, 
        {
            "location": "/samba_winbind/#install-samba-and-winbind", 
            "text": "yum -y install samba-common samba-client samba-winbind", 
            "title": "Install samba and winbind"
        }, 
        {
            "location": "/samba_winbind/#change-authentification-system", 
            "text": "authconfig --enablewinbind \\\n--enablesmbauth \\\n--smbsecurity=ads \\\n--smbworkgroup=YOURWORKGROUP \\\n--smbrealm=YOURDOMAIN.NET \\\n--smbservers=dc.yourdomain.net \\\n--winbindtemplateshel=/sbin/nologin \\\n--enablewinbindusedefaultdomain \\\n--update", 
            "title": "Change authentification system"
        }, 
        {
            "location": "/samba_winbind/#join-the-domain", 
            "text": "net ads join admin@YOURDOMAIN.NET\nnet ads testjoin", 
            "title": "Join the domain"
        }, 
        {
            "location": "/samba_winbind/#check-the-authentification", 
            "text": "wbinfo -u\nwbinfo -g\ngetent passwd", 
            "title": "Check the authentification"
        }, 
        {
            "location": "/samba_winbind/#configure-samba-share", 
            "text": "# Share example (/etc/samba/smb.conf)\n [DBshare]\n   comment = Database share\n   path = /home/db/smb\n   read only = yes\n   browseable = yes\n   guest ok = no\n   valid users = @thedomain\\thegroup1,@thedomain\\thegroup2\n# if you have enabled  winbind use default domain \n   valid users = @thegroup1, @thegroup2", 
            "title": "Configure samba share"
        }, 
        {
            "location": "/samba_winbind/#restart-samba", 
            "text": "/etc/init.d/samba restart", 
            "title": "Restart samba"
        }, 
        {
            "location": "/samba_winbind/#test-samba", 
            "text": "smbclient -U user -L smbserver\nsmbclient -U user //srv.yourdomain.net/theshare", 
            "title": "Test samba"
        }, 
        {
            "location": "/samba_winbind/#troubleshooting", 
            "text": "If the Domain Controller is a Windows Server 2008 R2, you need to install samba3x   mkdir /tmp/smb_bkp\ncp -Rf /etc/samba/* /tmp/smb_bkp\nrpm -e --nodeps samba samba-client samba-common\nyum -y install samba3x samba3x-common samba3x-client   You can use Windows group to set folders/files permissions", 
            "title": "Troubleshooting"
        }, 
        {
            "location": "/selinux_usage/", 
            "text": "Install dependencies\n\n\nsemanage # yum install policycoreutil-python\n\n\n\n\nOn/Off\n\n\nsetenforce 1\ngetenforce\n\n\n\n\nShow file\u2019s selinux settings\n\n\nls -Z [file]\n\n\n\n\nSELinux booleans\n\n\ngetsebool -a\nsetsebool -P boolean value\nsemanage boolean -l\n\n\n\n\nMonitor selinux violations\n\n\nyum instal setroubleshoot-server\n\n\n\n\nModify SELinux setting on file(s)\n\n\nsemanage fcontext -a -f \n -t httpd_sys_content_t '/var/www/html/test_site(/.*)?' # marche pas !!!\nrestorecon -RFv /var/www/html/test_site", 
            "title": "Selinux usage"
        }, 
        {
            "location": "/selinux_usage/#install-dependencies", 
            "text": "semanage # yum install policycoreutil-python", 
            "title": "Install dependencies"
        }, 
        {
            "location": "/selinux_usage/#onoff", 
            "text": "setenforce 1\ngetenforce", 
            "title": "On/Off"
        }, 
        {
            "location": "/selinux_usage/#show-files-selinux-settings", 
            "text": "ls -Z [file]", 
            "title": "Show file\u2019s selinux settings"
        }, 
        {
            "location": "/selinux_usage/#selinux-booleans", 
            "text": "getsebool -a\nsetsebool -P boolean value\nsemanage boolean -l", 
            "title": "SELinux booleans"
        }, 
        {
            "location": "/selinux_usage/#monitor-selinux-violations", 
            "text": "yum instal setroubleshoot-server", 
            "title": "Monitor selinux violations"
        }, 
        {
            "location": "/selinux_usage/#modify-selinux-setting-on-files", 
            "text": "semanage fcontext -a -f   -t httpd_sys_content_t '/var/www/html/test_site(/.*)?' # marche pas !!!\nrestorecon -RFv /var/www/html/test_site", 
            "title": "Modify SELinux setting on file(s)"
        }, 
        {
            "location": "/simple_get_ip/", 
            "text": "curl http://ipecho.net/plain; echo", 
            "title": "Simple get ip"
        }, 
        {
            "location": "/ssh_tunnel/", 
            "text": "# Create a SOCKS 5 Tunnel\nssh -vvv -N -D 8888 root@remotehost.domain\n\n# Forward local to remote port\nssh -vvv -N -L 8888:127.0.0.1:80 root@remotehost.domain", 
            "title": "Ssh tunnel"
        }, 
        {
            "location": "/statsd/", 
            "text": "Send counter\n\n\necho -n \u201cevents.restart.occurences:1|c\n | nc -w 1 -u docker 8125\n\n\n\n\nSend Gauges\n\n\necho -n \nsystem.cpu.goblets:10|g\n | nc -w 1 -u docker 8125\n\n\n\n\nSend Timers\n\n\necho -n \u201capp.produce.latency:60|ms\n | nc -w 1 -u docker 8125", 
            "title": "Statsd"
        }, 
        {
            "location": "/statsd/#send-counter", 
            "text": "echo -n \u201cevents.restart.occurences:1|c  | nc -w 1 -u docker 8125", 
            "title": "Send counter"
        }, 
        {
            "location": "/statsd/#send-gauges", 
            "text": "echo -n  system.cpu.goblets:10|g  | nc -w 1 -u docker 8125", 
            "title": "Send Gauges"
        }, 
        {
            "location": "/statsd/#send-timers", 
            "text": "echo -n \u201capp.produce.latency:60|ms  | nc -w 1 -u docker 8125", 
            "title": "Send Timers"
        }, 
        {
            "location": "/tcddump/", 
            "text": "# -nn not lookup hostnames\n# -X print in hex and ascii\n# -S absolute TCP seq numbers\n# -s get full lenght packet\ntcpdump -nn -X -S -s 0 port 389", 
            "title": "Tcddump"
        }, 
        {
            "location": "/test_bibi/", 
            "text": "Hello world :)", 
            "title": "Test bibi"
        }, 
        {
            "location": "/test_bibi/#hello-world", 
            "text": "", 
            "title": "Hello world :)"
        }, 
        {
            "location": "/testing-puppet/", 
            "text": "Install dependencies\n\n\napt-get install puppet-lint\ngem install rspec-puppet\ngit clone https://github.com/puppetlabs/puppetlabs_spec_helper.git\ncd puppetlabs_spec_helper\nrake package:gem\ngem install pkg/puppetlabs_spec_helper*.gem\n\n\n\nTest a module\n\n\nspec initialization.\n\n\nrspec-puppet-init\nsed -i \"1s/^/require 'rubygems'\\nrequire 'puppetlabs_spec_helper\\/rake_tasks'\\n/\" Rakefile\nsed -i \"1s/^/require 'rubygems'\\nrequire 'puppetlabs_spec_helper/module_spec_helper'\\n/\" spec/spec_helper.rb\n\n\n\nCreate .fixtures.yml file to deal with dependencies.\n\n\n# i.e for a module which needs stdlib from puppetlabs\ncat \n .fixtures.yml \nEOF\nfixtures:\n  repositories:\n      stdlib: git@github.com:puppetlabs/puppetlabs-stdlib.git\nEOF\n\n\n\nExemple with a Yum module.\n\n\nrequire 'spec_helper'\n\ndescribe 'yum::os' do\n\n  let(:facts){\n    { :operatingsystemrelease =\n '6.3' }\n    { :operatingsystem =\n 'CentOS' }\n    { :osfamily =\n 'RedHat' }\n  }\n\n  it { should contain_class('yum') }\n\n  it do\n    should contain_yumrepo('centos6-os').with({\n      'enabled'   =\n '1',\n      'gpgcheck'  =\n '0',\n    })\n  end\nend", 
            "title": "Testing puppet"
        }, 
        {
            "location": "/testing-puppet/#install-dependencies", 
            "text": "apt-get install puppet-lint\ngem install rspec-puppet\ngit clone https://github.com/puppetlabs/puppetlabs_spec_helper.git\ncd puppetlabs_spec_helper\nrake package:gem\ngem install pkg/puppetlabs_spec_helper*.gem", 
            "title": "Install dependencies"
        }, 
        {
            "location": "/testing-puppet/#test-a-module", 
            "text": "spec initialization.  rspec-puppet-init\nsed -i \"1s/^/require 'rubygems'\\nrequire 'puppetlabs_spec_helper\\/rake_tasks'\\n/\" Rakefile\nsed -i \"1s/^/require 'rubygems'\\nrequire 'puppetlabs_spec_helper/module_spec_helper'\\n/\" spec/spec_helper.rb  Create .fixtures.yml file to deal with dependencies.  # i.e for a module which needs stdlib from puppetlabs\ncat   .fixtures.yml  EOF\nfixtures:\n  repositories:\n      stdlib: git@github.com:puppetlabs/puppetlabs-stdlib.git\nEOF  Exemple with a Yum module.  require 'spec_helper'\n\ndescribe 'yum::os' do\n\n  let(:facts){\n    { :operatingsystemrelease =  '6.3' }\n    { :operatingsystem =  'CentOS' }\n    { :osfamily =  'RedHat' }\n  }\n\n  it { should contain_class('yum') }\n\n  it do\n    should contain_yumrepo('centos6-os').with({\n      'enabled'   =  '1',\n      'gpgcheck'  =  '0',\n    })\n  end\nend", 
            "title": "Test a module"
        }, 
        {
            "location": "/traceroute/", 
            "text": "# By default UDP\n# Use ICMP ECHO\ntraceroute -I target.domain\n# Use TCP SYN\ntraceroute -T target.domain\n\n# Streamlined traceroute\nmtr target.domain", 
            "title": "Traceroute"
        }, 
        {
            "location": "/ubuntu_init/", 
            "text": "How to get current runlevel\n\n\nrunlevel\n\n\n\n\nEnable service during start\n\n\nupdate-rc.d SERVICENAME defaults", 
            "title": "Ubuntu init"
        }, 
        {
            "location": "/ubuntu_init/#how-to-get-current-runlevel", 
            "text": "runlevel", 
            "title": "How to get current runlevel"
        }, 
        {
            "location": "/ubuntu_init/#enable-service-during-start", 
            "text": "update-rc.d SERVICENAME defaults", 
            "title": "Enable service during start"
        }, 
        {
            "location": "/ubuntu_spice_xpi/", 
            "text": "sudo su -\nadd-apt-repository ppa:jasonbrooks/ppa\napt-get update\napt-get install spice-xpi\napt-get -f install", 
            "title": "Ubuntu spice xpi"
        }, 
        {
            "location": "/update_alternative/", 
            "text": "Register a new alternative\n\n\nupdate-alternatives --install \nlink\n \nname\n \npath\n \npriority # 100 == auto mode\n\n\n# Example\nupdate-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.9.1 100\n\n\n\n\nChange to another alternative\n\n\nupdate-alternatives --config ruby\n# or\nupdate-alternative --set ruby /usr/bin/ruby1.9.1", 
            "title": "Update alternative"
        }, 
        {
            "location": "/vagrant/", 
            "text": "KVM Provider.\n\n\nvagrant plugin install vagrant-kvm\n\n\n\nExamples.\n\n\nvagrant box add precise32 http://files.vagrantup.com/precise32.box\nmv ~/.vagrant.d/boxes/precise32/virtualbox ~/.vagrant.d/boxes/precise32/kvm\ncat \nEOF \n~/.vagrant.d/boxes/precise32/kvm/metadata.json\n{\"provider\": \"kvm\"}\nEOF", 
            "title": "Vagrant"
        }, 
        {
            "location": "/vim_tips/", 
            "text": "Plugins\n\n\nAutoloaders\n\n\ntree autoload/\n# autoload/\n# \u251c\u2500\u2500 pathogen.vim\n# \u2514\u2500\u2500 snipMate.vim\n\n\n\n\nBundles\n\n\ntree -L 1 bundle/\n# bundle/\n# \u251c\u2500\u2500 nerdtree\n# \u251c\u2500\u2500 vim-endwise\n# \u251c\u2500\u2500 vim-puppet\n# \u2514\u2500\u2500 vim-ruby\n\n\n\n\nSettings\n\n\n# \nCTRL+w\n + \nArrows\n -\n change the current buffer/window\n:set expandtab\n:set tabstop=4\n\n\n\n\nKeys\n\n\nvib # select block\nviB # select curly brake\nvi\n # select text in \n \n\n{ d} # cut paragraph\n} # go to the next blank line\n% # jump to the matching { }, ( )", 
            "title": "Vim tips"
        }, 
        {
            "location": "/vim_tips/#plugins", 
            "text": "", 
            "title": "Plugins"
        }, 
        {
            "location": "/vim_tips/#autoloaders", 
            "text": "tree autoload/\n# autoload/\n# \u251c\u2500\u2500 pathogen.vim\n# \u2514\u2500\u2500 snipMate.vim", 
            "title": "Autoloaders"
        }, 
        {
            "location": "/vim_tips/#bundles", 
            "text": "tree -L 1 bundle/\n# bundle/\n# \u251c\u2500\u2500 nerdtree\n# \u251c\u2500\u2500 vim-endwise\n# \u251c\u2500\u2500 vim-puppet\n# \u2514\u2500\u2500 vim-ruby", 
            "title": "Bundles"
        }, 
        {
            "location": "/vim_tips/#settings", 
            "text": "#  CTRL+w  +  Arrows  -  change the current buffer/window\n:set expandtab\n:set tabstop=4", 
            "title": "Settings"
        }, 
        {
            "location": "/vim_tips/#keys", 
            "text": "vib # select block\nviB # select curly brake\nvi  # select text in    \n{ d} # cut paragraph\n} # go to the next blank line\n% # jump to the matching { }, ( )", 
            "title": "Keys"
        }, 
        {
            "location": "/wget_socks5/", 
            "text": "yum install tsocks\ncat \n /etc/tsocks.conf \nEOF\nserver = 127.0.0.1\nserver_type = 5\nserver_port = 8888\nEOF", 
            "title": "Wget socks5"
        }
    ]
}